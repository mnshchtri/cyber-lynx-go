{"ast":null,"code":"import KeyCode from \"@rc-component/util/es/KeyCode\";\nimport raf from \"@rc-component/util/es/raf\";\nimport * as React from 'react';\nconst {\n  ESC,\n  TAB\n} = KeyCode;\nexport default function useAccessibility({\n  visible,\n  triggerRef,\n  onVisibleChange,\n  autoFocus,\n  overlayRef\n}) {\n  const focusMenuRef = React.useRef(false);\n  const handleCloseMenuAndReturnFocus = () => {\n    if (visible) {\n      triggerRef.current?.focus?.();\n      onVisibleChange?.(false);\n    }\n  };\n  const focusMenu = () => {\n    if (overlayRef.current?.focus) {\n      overlayRef.current.focus();\n      focusMenuRef.current = true;\n      return true;\n    }\n    return false;\n  };\n  const handleKeyDown = event => {\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n      case TAB:\n        {\n          let focusResult = false;\n          if (!focusMenuRef.current) {\n            focusResult = focusMenu();\n          }\n          if (focusResult) {\n            event.preventDefault();\n          } else {\n            handleCloseMenuAndReturnFocus();\n          }\n          break;\n        }\n    }\n  };\n  React.useEffect(() => {\n    if (visible) {\n      window.addEventListener('keydown', handleKeyDown);\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n      return () => {\n        window.removeEventListener('keydown', handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n    return () => {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}","map":{"version":3,"names":["KeyCode","raf","React","ESC","TAB","useAccessibility","visible","triggerRef","onVisibleChange","autoFocus","overlayRef","focusMenuRef","useRef","handleCloseMenuAndReturnFocus","current","focus","focusMenu","handleKeyDown","event","keyCode","focusResult","preventDefault","useEffect","window","addEventListener","removeEventListener"],"sources":["/Users/mnsh/Desktop/cyber-lynx/Cyber-LynX-php/frontend/node_modules/@rc-component/dropdown/es/hooks/useAccessibility.js"],"sourcesContent":["import KeyCode from \"@rc-component/util/es/KeyCode\";\nimport raf from \"@rc-component/util/es/raf\";\nimport * as React from 'react';\nconst {\n  ESC,\n  TAB\n} = KeyCode;\nexport default function useAccessibility({\n  visible,\n  triggerRef,\n  onVisibleChange,\n  autoFocus,\n  overlayRef\n}) {\n  const focusMenuRef = React.useRef(false);\n  const handleCloseMenuAndReturnFocus = () => {\n    if (visible) {\n      triggerRef.current?.focus?.();\n      onVisibleChange?.(false);\n    }\n  };\n  const focusMenu = () => {\n    if (overlayRef.current?.focus) {\n      overlayRef.current.focus();\n      focusMenuRef.current = true;\n      return true;\n    }\n    return false;\n  };\n  const handleKeyDown = event => {\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n      case TAB:\n        {\n          let focusResult = false;\n          if (!focusMenuRef.current) {\n            focusResult = focusMenu();\n          }\n          if (focusResult) {\n            event.preventDefault();\n          } else {\n            handleCloseMenuAndReturnFocus();\n          }\n          break;\n        }\n    }\n  };\n  React.useEffect(() => {\n    if (visible) {\n      window.addEventListener('keydown', handleKeyDown);\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n      return () => {\n        window.removeEventListener('keydown', handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n    return () => {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}"],"mappings":"AAAA,OAAOA,OAAO,MAAM,+BAA+B;AACnD,OAAOC,GAAG,MAAM,2BAA2B;AAC3C,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,MAAM;EACJC,GAAG;EACHC;AACF,CAAC,GAAGJ,OAAO;AACX,eAAe,SAASK,gBAAgBA,CAAC;EACvCC,OAAO;EACPC,UAAU;EACVC,eAAe;EACfC,SAAS;EACTC;AACF,CAAC,EAAE;EACD,MAAMC,YAAY,GAAGT,KAAK,CAACU,MAAM,CAAC,KAAK,CAAC;EACxC,MAAMC,6BAA6B,GAAGA,CAAA,KAAM;IAC1C,IAAIP,OAAO,EAAE;MACXC,UAAU,CAACO,OAAO,EAAEC,KAAK,GAAG,CAAC;MAC7BP,eAAe,GAAG,KAAK,CAAC;IAC1B;EACF,CAAC;EACD,MAAMQ,SAAS,GAAGA,CAAA,KAAM;IACtB,IAAIN,UAAU,CAACI,OAAO,EAAEC,KAAK,EAAE;MAC7BL,UAAU,CAACI,OAAO,CAACC,KAAK,CAAC,CAAC;MAC1BJ,YAAY,CAACG,OAAO,GAAG,IAAI;MAC3B,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd,CAAC;EACD,MAAMG,aAAa,GAAGC,KAAK,IAAI;IAC7B,QAAQA,KAAK,CAACC,OAAO;MACnB,KAAKhB,GAAG;QACNU,6BAA6B,CAAC,CAAC;QAC/B;MACF,KAAKT,GAAG;QACN;UACE,IAAIgB,WAAW,GAAG,KAAK;UACvB,IAAI,CAACT,YAAY,CAACG,OAAO,EAAE;YACzBM,WAAW,GAAGJ,SAAS,CAAC,CAAC;UAC3B;UACA,IAAII,WAAW,EAAE;YACfF,KAAK,CAACG,cAAc,CAAC,CAAC;UACxB,CAAC,MAAM;YACLR,6BAA6B,CAAC,CAAC;UACjC;UACA;QACF;IACJ;EACF,CAAC;EACDX,KAAK,CAACoB,SAAS,CAAC,MAAM;IACpB,IAAIhB,OAAO,EAAE;MACXiB,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEP,aAAa,CAAC;MACjD,IAAIR,SAAS,EAAE;QACb;QACAR,GAAG,CAACe,SAAS,EAAE,CAAC,CAAC;MACnB;MACA,OAAO,MAAM;QACXO,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAER,aAAa,CAAC;QACpDN,YAAY,CAACG,OAAO,GAAG,KAAK;MAC9B,CAAC;IACH;IACA,OAAO,MAAM;MACXH,YAAY,CAACG,OAAO,GAAG,KAAK;IAC9B,CAAC;EACH,CAAC,EAAE,CAACR,OAAO,CAAC,CAAC,CAAC,CAAC;AACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}