{"ast":null,"code":"import { getShadowRoot } from \"@rc-component/util/es/Dom/shadow\";\nimport { warning } from \"@rc-component/util/es/warning\";\nimport * as React from 'react';\nimport { getWin } from \"../util\";\n\n/**\n * Close if click on the window.\n * Return the function that click on the Popup element.\n */\nexport default function useWinClick(open, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen) {\n  const openRef = React.useRef(open);\n  openRef.current = open;\n  const popupPointerDownRef = React.useRef(false);\n\n  // Click to hide is special action since click popup element should not hide\n  React.useEffect(() => {\n    if (clickToHide && popupEle && (!mask || maskClosable)) {\n      const onPointerDown = () => {\n        popupPointerDownRef.current = false;\n      };\n      const onTriggerClose = e => {\n        if (openRef.current && !inPopupOrChild(e.composedPath?.()?.[0] || e.target) && !popupPointerDownRef.current) {\n          triggerOpen(false);\n        }\n      };\n      const win = getWin(popupEle);\n      win.addEventListener('pointerdown', onPointerDown, true);\n      win.addEventListener('mousedown', onTriggerClose, true);\n      win.addEventListener('contextmenu', onTriggerClose, true);\n\n      // shadow root\n      const targetShadowRoot = getShadowRoot(targetEle);\n      if (targetShadowRoot) {\n        targetShadowRoot.addEventListener('mousedown', onTriggerClose, true);\n        targetShadowRoot.addEventListener('contextmenu', onTriggerClose, true);\n      }\n\n      // Warning if target and popup not in same root\n      if (process.env.NODE_ENV !== 'production' && targetEle) {\n        const targetRoot = targetEle.getRootNode?.();\n        const popupRoot = popupEle.getRootNode?.();\n        warning(targetRoot === popupRoot, `trigger element and popup element should in same shadow root.`);\n      }\n      return () => {\n        win.removeEventListener('pointerdown', onPointerDown, true);\n        win.removeEventListener('mousedown', onTriggerClose, true);\n        win.removeEventListener('contextmenu', onTriggerClose, true);\n        if (targetShadowRoot) {\n          targetShadowRoot.removeEventListener('mousedown', onTriggerClose, true);\n          targetShadowRoot.removeEventListener('contextmenu', onTriggerClose, true);\n        }\n      };\n    }\n  }, [clickToHide, targetEle, popupEle, mask, maskClosable]);\n  function onPopupPointerDown() {\n    popupPointerDownRef.current = true;\n  }\n  return onPopupPointerDown;\n}","map":{"version":3,"names":["getShadowRoot","warning","React","getWin","useWinClick","open","clickToHide","targetEle","popupEle","mask","maskClosable","inPopupOrChild","triggerOpen","openRef","useRef","current","popupPointerDownRef","useEffect","onPointerDown","onTriggerClose","e","composedPath","target","win","addEventListener","targetShadowRoot","process","env","NODE_ENV","targetRoot","getRootNode","popupRoot","removeEventListener","onPopupPointerDown"],"sources":["/Users/mnsh/Desktop/cyber-lynx/Cyber-LynX-php/frontend/node_modules/@rc-component/trigger/es/hooks/useWinClick.js"],"sourcesContent":["import { getShadowRoot } from \"@rc-component/util/es/Dom/shadow\";\nimport { warning } from \"@rc-component/util/es/warning\";\nimport * as React from 'react';\nimport { getWin } from \"../util\";\n\n/**\n * Close if click on the window.\n * Return the function that click on the Popup element.\n */\nexport default function useWinClick(open, clickToHide, targetEle, popupEle, mask, maskClosable, inPopupOrChild, triggerOpen) {\n  const openRef = React.useRef(open);\n  openRef.current = open;\n  const popupPointerDownRef = React.useRef(false);\n\n  // Click to hide is special action since click popup element should not hide\n  React.useEffect(() => {\n    if (clickToHide && popupEle && (!mask || maskClosable)) {\n      const onPointerDown = () => {\n        popupPointerDownRef.current = false;\n      };\n      const onTriggerClose = e => {\n        if (openRef.current && !inPopupOrChild(e.composedPath?.()?.[0] || e.target) && !popupPointerDownRef.current) {\n          triggerOpen(false);\n        }\n      };\n      const win = getWin(popupEle);\n      win.addEventListener('pointerdown', onPointerDown, true);\n      win.addEventListener('mousedown', onTriggerClose, true);\n      win.addEventListener('contextmenu', onTriggerClose, true);\n\n      // shadow root\n      const targetShadowRoot = getShadowRoot(targetEle);\n      if (targetShadowRoot) {\n        targetShadowRoot.addEventListener('mousedown', onTriggerClose, true);\n        targetShadowRoot.addEventListener('contextmenu', onTriggerClose, true);\n      }\n\n      // Warning if target and popup not in same root\n      if (process.env.NODE_ENV !== 'production' && targetEle) {\n        const targetRoot = targetEle.getRootNode?.();\n        const popupRoot = popupEle.getRootNode?.();\n        warning(targetRoot === popupRoot, `trigger element and popup element should in same shadow root.`);\n      }\n      return () => {\n        win.removeEventListener('pointerdown', onPointerDown, true);\n        win.removeEventListener('mousedown', onTriggerClose, true);\n        win.removeEventListener('contextmenu', onTriggerClose, true);\n        if (targetShadowRoot) {\n          targetShadowRoot.removeEventListener('mousedown', onTriggerClose, true);\n          targetShadowRoot.removeEventListener('contextmenu', onTriggerClose, true);\n        }\n      };\n    }\n  }, [clickToHide, targetEle, popupEle, mask, maskClosable]);\n  function onPopupPointerDown() {\n    popupPointerDownRef.current = true;\n  }\n  return onPopupPointerDown;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}