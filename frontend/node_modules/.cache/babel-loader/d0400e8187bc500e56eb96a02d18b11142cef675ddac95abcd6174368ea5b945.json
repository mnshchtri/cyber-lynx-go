{"ast":null,"code":"var _jsxFileName = \"/Users/mnsh/Desktop/cyber-lynx-go/frontend/src/components/workflow/WorkflowTerminal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WorkflowTerminal = ({\n  nodes,\n  connections,\n  isMinimized,\n  onMinimize,\n  onMaximize\n}) => {\n  _s();\n  const [commandHistory, setCommandHistory] = useState([]);\n  const [currentCommand, setCurrentCommand] = useState('');\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [output, setOutput] = useState([]);\n  const [isExecuting, setIsExecuting] = useState(false);\n  const [currentDirectory, setCurrentDirectory] = useState('~');\n  const [isDragging, setIsDragging] = useState(false);\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [dragStart, setDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const inputRef = useRef(null);\n  const outputRef = useRef(null);\n  const terminalRef = useRef(null);\n  const headerRef = useRef(null);\n  useEffect(() => {\n    // Focus terminal when opened\n    if (!isMinimized && terminalRef.current) {\n      terminalRef.current.focus();\n    }\n  }, [isMinimized]);\n  useEffect(() => {\n    const handleMouseMove = e => {\n      if (isDragging) {\n        const newX = window.innerWidth - (e.clientX - dragStart.x) - 600; // 600 is terminal width\n        const newY = window.innerHeight - (e.clientY - dragStart.y) - 500; // 500 is terminal height\n        setPosition({\n          x: Math.max(20, Math.min(window.innerWidth - 620, newX)),\n          y: Math.max(20, Math.min(window.innerHeight - 520, newY))\n        });\n      }\n    };\n    const handleMouseUp = () => {\n      setIsDragging(false);\n    };\n    if (isDragging) {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n      return () => {\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, dragStart]);\n  const handleHeaderMouseDown = e => {\n    var _terminalRef$current;\n    // Don't start dragging if clicking on buttons\n    if (e.target.closest('button') || e.target.closest('.cursor-pointer')) {\n      return;\n    }\n    setIsDragging(true);\n    const rect = (_terminalRef$current = terminalRef.current) === null || _terminalRef$current === void 0 ? void 0 : _terminalRef$current.getBoundingClientRect();\n    if (rect) {\n      setDragStart({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n    }\n  };\n  useEffect(() => {\n    // Auto-scroll to bottom when output changes\n    if (outputRef.current) {\n      outputRef.current.scrollTop = outputRef.current.scrollHeight;\n    }\n  }, [output]);\n  const executeCommand = async cmd => {\n    if (!cmd.trim()) {\n      addOutput('', '');\n      return;\n    }\n\n    // Add command to history\n    const newHistory = [...commandHistory, cmd];\n    setCommandHistory(newHistory);\n    setHistoryIndex(-1);\n    setCurrentCommand('');\n\n    // Display command in output\n    addOutput(currentDirectory, cmd);\n\n    // Parse command\n    const parts = cmd.trim().split(' ');\n    const command = parts[0];\n    const args = parts.slice(1);\n    setIsExecuting(true);\n    try {\n      // Handle built-in commands\n      if (command === 'clear' || command === 'cls') {\n        setOutput([]);\n        setIsExecuting(false);\n        return;\n      }\n      if (command === 'cd') {\n        const path = args[0] || '~';\n        setCurrentDirectory(path);\n        addOutput('', `Changed directory to ${path}`);\n        setIsExecuting(false);\n        return;\n      }\n      if (command === 'help') {\n        addOutput('', 'Available commands:');\n        addOutput('', '  clear, cls          - Clear terminal');\n        addOutput('', '  cd <path>          - Change directory');\n        addOutput('', '  help               - Show this help');\n        addOutput('', '  history            - Show command history');\n        addOutput('', '  echo <text>        - Echo text');\n        addOutput('', '');\n        addOutput('', 'Workflow commands:');\n        addOutput('', '  workflow-commands  - Show generated workflow commands');\n        addOutput('', '  workflow-execute   - Execute all workflow commands');\n        setIsExecuting(false);\n        return;\n      }\n      if (command === 'history') {\n        if (commandHistory.length === 0) {\n          addOutput('', 'No command history');\n        } else {\n          commandHistory.forEach((histCmd, idx) => {\n            addOutput('', `${idx + 1}  ${histCmd}`);\n          });\n        }\n        setIsExecuting(false);\n        return;\n      }\n      if (command === 'echo') {\n        addOutput('', args.join(' '));\n        setIsExecuting(false);\n        return;\n      }\n      if (command === 'workflow-commands') {\n        const commands = generateWorkflowCommands();\n        if (commands.length === 0) {\n          addOutput('', 'No workflow commands generated. Add tools to your workflow.');\n        } else {\n          addOutput('', `Generated ${commands.length} command(s) from workflow:`);\n          commands.forEach((cmd, idx) => {\n            addOutput('', `[${idx + 1}] ${cmd.tool}: ${cmd.command}`);\n          });\n        }\n        setIsExecuting(false);\n        return;\n      }\n      if (command === 'workflow-execute') {\n        const commands = generateWorkflowCommands();\n        if (commands.length === 0) {\n          addOutput('', 'No workflow commands to execute.');\n          setIsExecuting(false);\n          return;\n        }\n        addOutput('', `Executing ${commands.length} workflow command(s)...`);\n        for (let i = 0; i < commands.length; i++) {\n          const cmd = commands[i];\n          addOutput('', `[${i + 1}/${commands.length}] Executing: ${cmd.command}`);\n\n          // Execute via API\n          await executeSystemCommand(cmd.command);\n        }\n        addOutput('', 'Workflow execution complete.');\n        setIsExecuting(false);\n        return;\n      }\n\n      // Execute system command via API\n      await executeSystemCommand(cmd);\n    } catch (error) {\n      addOutput('', `Error: ${error.message}`, 'error');\n    } finally {\n      setIsExecuting(false);\n    }\n  };\n  const executeSystemCommand = async command => {\n    try {\n      // Call backend API to execute command\n      const response = await fetch('/api/execute-command', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          command\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.output) {\n        addOutput('', data.output);\n      }\n      if (data.error) {\n        addOutput('', data.error, 'error');\n      }\n      if (data.exitCode !== undefined) {\n        if (data.exitCode !== 0) {\n          addOutput('', `Command exited with code ${data.exitCode}`, 'error');\n        }\n      }\n    } catch (error) {\n      // If API doesn't exist, show placeholder\n      if (error.message.includes('Failed to fetch') || error.message.includes('404')) {\n        addOutput('', `Command: ${command}`, 'info');\n        addOutput('', 'Note: Backend API endpoint /api/execute-command not configured.', 'info');\n        addOutput('', 'To enable command execution, implement the API endpoint in your backend.', 'info');\n      } else {\n        addOutput('', `Error executing command: ${error.message}`, 'error');\n      }\n    }\n  };\n  const generateWorkflowCommands = () => {\n    if (nodes.length === 0) return [];\n    const executionOrder = buildExecutionOrder(nodes, connections);\n    return executionOrder.map(node => ({\n      tool: node.name,\n      command: buildCommand(node)\n    }));\n  };\n  const buildExecutionOrder = (nodes, connections) => {\n    const ordered = [];\n    const visited = new Set();\n    const inDegree = new Map();\n    nodes.forEach(node => {\n      inDegree.set(node.id, 0);\n    });\n    connections.forEach(conn => {\n      inDegree.set(conn.to, (inDegree.get(conn.to) || 0) + 1);\n    });\n    const queue = nodes.filter(node => inDegree.get(node.id) === 0);\n    while (queue.length > 0) {\n      const node = queue.shift();\n      if (!visited.has(node.id)) {\n        visited.add(node.id);\n        ordered.push(node);\n        connections.filter(conn => conn.from === node.id).forEach(conn => {\n          const targetNode = nodes.find(n => n.id === conn.to);\n          if (targetNode) {\n            const newDegree = (inDegree.get(conn.to) || 0) - 1;\n            inDegree.set(conn.to, newDegree);\n            if (newDegree === 0) {\n              queue.push(targetNode);\n            }\n          }\n        });\n      }\n    }\n    nodes.forEach(node => {\n      if (!visited.has(node.id)) {\n        ordered.push(node);\n      }\n    });\n    return ordered;\n  };\n  const buildCommand = node => {\n    const config = node.config || {};\n    const toolName = node.name.toLowerCase();\n    switch (toolName) {\n      case 'nmap':\n        const target = config.target || 'TARGET';\n        const scanType = config.scan_type ? config.scan_type.split(' ')[0] : '-sS';\n        const ports = config.ports || '1-1000';\n        const timing = config.timing ? config.timing.split(' ')[0] : '-T3';\n        const scripts = config.scripts ? `--script=${config.scripts}` : '';\n        const outputFlag = config.output === 'XML' ? '-oX' : config.output === 'Grepable' ? '-oG' : config.output === 'All' ? '-oA' : '';\n        const outputFile = outputFlag ? ` ${outputFlag} output` : '';\n        return `nmap ${scanType} ${timing} ${scripts} ${ports} ${target}${outputFile}`.replace(/\\s+/g, ' ').trim();\n      case 'subfinder':\n        const domain = config.domain || 'example.com';\n        const sources = config.sources ? `-sources ${config.sources}` : '';\n        const recursive = config.recursive ? '-recursive' : '';\n        const threads = config.threads ? `-t ${config.threads}` : '';\n        const timeout = config.timeout ? `-timeout ${config.timeout}` : '';\n        const outputFileSub = config.output ? `-o ${config.output}` : '';\n        return `subfinder -d ${domain} ${sources} ${recursive} ${threads} ${timeout} ${outputFileSub}`.replace(/\\s+/g, ' ').trim();\n      case 'dirsearch':\n        const url = config.url || 'https://example.com';\n        const wordlist = config.wordlist ? `-w ${config.wordlist}` : '-w /usr/share/wordlists/dirb/common.txt';\n        const extensions = config.extensions ? `-e ${config.extensions}` : '';\n        const threadsDir = config.threads ? `-t ${config.threads}` : '';\n        const recursiveDir = config.recursive ? '--recursive' : '';\n        const statusCodes = config.status_codes ? `--status-codes ${config.status_codes}` : '';\n        return `python3 dirsearch.py -u ${url} ${wordlist} ${extensions} ${threadsDir} ${recursiveDir} ${statusCodes}`.replace(/\\s+/g, ' ').trim();\n      case 'ghauri':\n        const ghauriUrl = config.url || 'http://example.com/vuln.php?id=1';\n        const method = config.method || 'GET';\n        const data = config.data ? `--data \"${config.data}\"` : '';\n        const level = config.level ? `--level ${config.level.split(' ')[0]}` : '';\n        const risk = config.risk ? `--risk ${config.risk}` : '';\n        const technique = config.technique ? `--technique ${config.technique}` : '';\n        return `ghauri -u \"${ghauriUrl}\" ${method === 'POST' ? `-X POST ${data}` : ''} ${level} ${risk} ${technique}`.replace(/\\s+/g, ' ').trim();\n      default:\n        return `# ${node.name} - Configuration needed`;\n    }\n  };\n  const addOutput = (prompt, text, type = 'normal') => {\n    const timestamp = new Date().toLocaleTimeString();\n    setOutput(prev => [...prev, {\n      prompt,\n      text,\n      type,\n      timestamp\n    }]);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      executeCommand(currentCommand);\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (commandHistory.length > 0) {\n        const newIndex = historyIndex === -1 ? commandHistory.length - 1 : Math.max(0, historyIndex - 1);\n        setHistoryIndex(newIndex);\n        setCurrentCommand(commandHistory[newIndex]);\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (historyIndex >= 0) {\n        const newIndex = historyIndex + 1;\n        if (newIndex >= commandHistory.length) {\n          setHistoryIndex(-1);\n          setCurrentCommand('');\n        } else {\n          setHistoryIndex(newIndex);\n          setCurrentCommand(commandHistory[newIndex]);\n        }\n      }\n    } else if (e.key === 'Tab') {\n      e.preventDefault();\n      // Tab completion could be added here\n    } else if (e.key === 'c' && e.ctrlKey) {\n      e.preventDefault();\n      if (isExecuting) {\n        addOutput('', '^C', 'error');\n        setIsExecuting(false);\n      }\n    } else if (e.key === 'l' && e.ctrlKey) {\n      e.preventDefault();\n      setOutput([]);\n    }\n  };\n  const getOutputColor = type => {\n    switch (type) {\n      case 'error':\n        return 'text-red-500';\n      case 'info':\n        return 'text-cyan-400';\n      default:\n        return 'text-green-400';\n    }\n  };\n  if (isMinimized) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: terminalRef,\n    className: \"flex flex-col bg-black rounded-lg overflow-hidden border border-gray-800 shadow-2xl\",\n    tabIndex: 0,\n    onKeyDown: handleKeyDown,\n    style: {\n      fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", Consolas, \"Courier New\", monospace',\n      width: '600px',\n      height: '500px',\n      position: 'fixed',\n      bottom: position.y || 80,\n      right: position.x || 20,\n      zIndex: 10000,\n      transform: isDragging ? 'none' : undefined\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: headerRef,\n      onMouseDown: handleHeaderMouseDown,\n      className: \"flex items-center justify-between px-4 py-2 bg-gray-900 border-b border-gray-800 cursor-move\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-1.5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-3 h-3 rounded-full bg-red-500 hover:bg-red-600 transition-colors cursor-pointer\",\n            title: \"Close\",\n            onClick: e => {\n              e.stopPropagation();\n              if (onMinimize) onMinimize();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-3 h-3 rounded-full bg-yellow-500 hover:bg-yellow-600 transition-colors cursor-pointer\",\n            title: \"Minimize\",\n            onClick: e => {\n              e.stopPropagation();\n              if (onMinimize) onMinimize();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-3 h-3 rounded-full bg-green-500 hover:bg-green-600 transition-colors cursor-pointer\",\n            title: \"Maximize\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs text-gray-500 ml-3 font-mono\",\n          children: \"user@cyberlynx: ~\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.stopPropagation();\n            setOutput([]);\n          },\n          className: \"px-2 py-1 text-xs bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded transition-colors font-mono\",\n          children: \"Clear\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: outputRef,\n      className: \"flex-1 overflow-y-auto p-4 text-sm bg-black text-green-400 terminal-scrollbar\",\n      style: {\n        fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", Consolas, \"Courier New\", monospace',\n        fontSize: '13px',\n        lineHeight: '1.5',\n        scrollbarWidth: 'thin',\n        scrollbarColor: '#374151 #000000'\n      },\n      children: [output.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-600 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-green-400\",\n          children: \"Welcome to CyberLynX Terminal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 text-gray-600\",\n          children: \"Type 'help' for available commands\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-600\",\n          children: \"Type 'workflow-commands' to see generated workflow commands\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 text-gray-700\",\n          children: \"\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 11\n      }, this), output.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-0.5 leading-relaxed\",\n        children: [item.prompt && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-300\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-400 font-semibold\",\n            children: \"user\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: \"@\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-400 font-semibold\",\n            children: \"cyberlynx\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: \":\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-yellow-400\",\n            children: item.prompt\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: \"$\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 17\n          }, this), ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: getOutputColor(item.type),\n          style: {\n            whiteSpace: 'pre-wrap',\n            wordBreak: 'break-word'\n          },\n          children: item.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 11\n      }, this)), isExecuting && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"inline-block w-2 h-4 bg-green-400 animate-pulse ml-1\",\n        style: {\n          verticalAlign: 'middle'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-t border-gray-800 bg-black p-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-300 mr-1 select-none\",\n          style: {\n            fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", Consolas, \"Courier New\", monospace'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-400 font-semibold\",\n            children: \"user\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: \"@\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-400 font-semibold\",\n            children: \"cyberlynx\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: \":\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-yellow-400\",\n            children: currentDirectory\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500\",\n            children: \"$\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this), ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: inputRef,\n          type: \"text\",\n          value: currentCommand,\n          onChange: e => setCurrentCommand(e.target.value),\n          onKeyDown: handleKeyDown,\n          className: \"flex-1 bg-transparent text-green-400 outline-none ml-1 font-mono caret-green-400\",\n          style: {\n            fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", Consolas, \"Courier New\", monospace',\n            fontSize: '13px'\n          },\n          placeholder: \"\",\n          disabled: isExecuting,\n          autoFocus: true,\n          spellCheck: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this), isExecuting && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-500 ml-2 animate-pulse\",\n          children: \"\\u23F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 392,\n    columnNumber: 5\n  }, this);\n};\n_s(WorkflowTerminal, \"rLbL0zG5GKDxXrm4D+L64eQRg5s=\");\n_c = WorkflowTerminal;\nexport default WorkflowTerminal;\nvar _c;\n$RefreshReg$(_c, \"WorkflowTerminal\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","WorkflowTerminal","nodes","connections","isMinimized","onMinimize","onMaximize","_s","commandHistory","setCommandHistory","currentCommand","setCurrentCommand","historyIndex","setHistoryIndex","output","setOutput","isExecuting","setIsExecuting","currentDirectory","setCurrentDirectory","isDragging","setIsDragging","position","setPosition","x","y","dragStart","setDragStart","inputRef","outputRef","terminalRef","headerRef","current","focus","handleMouseMove","e","newX","window","innerWidth","clientX","newY","innerHeight","clientY","Math","max","min","handleMouseUp","addEventListener","removeEventListener","handleHeaderMouseDown","_terminalRef$current","target","closest","rect","getBoundingClientRect","left","top","scrollTop","scrollHeight","executeCommand","cmd","trim","addOutput","newHistory","parts","split","command","args","slice","path","length","forEach","histCmd","idx","join","commands","generateWorkflowCommands","tool","i","executeSystemCommand","error","message","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","exitCode","undefined","includes","executionOrder","buildExecutionOrder","map","node","name","buildCommand","ordered","visited","Set","inDegree","Map","set","id","conn","to","get","queue","filter","shift","has","add","push","from","targetNode","find","n","newDegree","config","toolName","toLowerCase","scanType","scan_type","ports","timing","scripts","outputFlag","outputFile","replace","domain","sources","recursive","threads","timeout","outputFileSub","url","wordlist","extensions","threadsDir","recursiveDir","statusCodes","status_codes","ghauriUrl","level","risk","technique","prompt","text","type","timestamp","Date","toLocaleTimeString","prev","handleKeyDown","key","preventDefault","newIndex","ctrlKey","getOutputColor","ref","className","tabIndex","onKeyDown","style","fontFamily","width","height","bottom","right","zIndex","transform","children","onMouseDown","title","onClick","stopPropagation","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","lineHeight","scrollbarWidth","scrollbarColor","item","index","whiteSpace","wordBreak","verticalAlign","value","onChange","placeholder","disabled","autoFocus","spellCheck","_c","$RefreshReg$"],"sources":["/Users/mnsh/Desktop/cyber-lynx-go/frontend/src/components/workflow/WorkflowTerminal.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n\nconst WorkflowTerminal = ({ nodes, connections, isMinimized, onMinimize, onMaximize }) => {\n  const [commandHistory, setCommandHistory] = useState([]);\n  const [currentCommand, setCurrentCommand] = useState('');\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [output, setOutput] = useState([]);\n  const [isExecuting, setIsExecuting] = useState(false);\n  const [currentDirectory, setCurrentDirectory] = useState('~');\n  const [isDragging, setIsDragging] = useState(false);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const inputRef = useRef(null);\n  const outputRef = useRef(null);\n  const terminalRef = useRef(null);\n  const headerRef = useRef(null);\n\n  useEffect(() => {\n    // Focus terminal when opened\n    if (!isMinimized && terminalRef.current) {\n      terminalRef.current.focus();\n    }\n  }, [isMinimized]);\n\n  useEffect(() => {\n    const handleMouseMove = (e) => {\n      if (isDragging) {\n        const newX = window.innerWidth - (e.clientX - dragStart.x) - 600; // 600 is terminal width\n        const newY = window.innerHeight - (e.clientY - dragStart.y) - 500; // 500 is terminal height\n        setPosition({\n          x: Math.max(20, Math.min(window.innerWidth - 620, newX)),\n          y: Math.max(20, Math.min(window.innerHeight - 520, newY))\n        });\n      }\n    };\n\n    const handleMouseUp = () => {\n      setIsDragging(false);\n    };\n\n    if (isDragging) {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n      return () => {\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, dragStart]);\n\n  const handleHeaderMouseDown = (e) => {\n    // Don't start dragging if clicking on buttons\n    if (e.target.closest('button') || e.target.closest('.cursor-pointer')) {\n      return;\n    }\n    setIsDragging(true);\n    const rect = terminalRef.current?.getBoundingClientRect();\n    if (rect) {\n      setDragStart({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n    }\n  };\n\n  useEffect(() => {\n    // Auto-scroll to bottom when output changes\n    if (outputRef.current) {\n      outputRef.current.scrollTop = outputRef.current.scrollHeight;\n    }\n  }, [output]);\n\n  const executeCommand = async (cmd) => {\n    if (!cmd.trim()) {\n      addOutput('', '');\n      return;\n    }\n\n    // Add command to history\n    const newHistory = [...commandHistory, cmd];\n    setCommandHistory(newHistory);\n    setHistoryIndex(-1);\n    setCurrentCommand('');\n\n    // Display command in output\n    addOutput(currentDirectory, cmd);\n\n    // Parse command\n    const parts = cmd.trim().split(' ');\n    const command = parts[0];\n    const args = parts.slice(1);\n\n    setIsExecuting(true);\n\n    try {\n      // Handle built-in commands\n      if (command === 'clear' || command === 'cls') {\n        setOutput([]);\n        setIsExecuting(false);\n        return;\n      }\n\n      if (command === 'cd') {\n        const path = args[0] || '~';\n        setCurrentDirectory(path);\n        addOutput('', `Changed directory to ${path}`);\n        setIsExecuting(false);\n        return;\n      }\n\n      if (command === 'help') {\n        addOutput('', 'Available commands:');\n        addOutput('', '  clear, cls          - Clear terminal');\n        addOutput('', '  cd <path>          - Change directory');\n        addOutput('', '  help               - Show this help');\n        addOutput('', '  history            - Show command history');\n        addOutput('', '  echo <text>        - Echo text');\n        addOutput('', '');\n        addOutput('', 'Workflow commands:');\n        addOutput('', '  workflow-commands  - Show generated workflow commands');\n        addOutput('', '  workflow-execute   - Execute all workflow commands');\n        setIsExecuting(false);\n        return;\n      }\n\n      if (command === 'history') {\n        if (commandHistory.length === 0) {\n          addOutput('', 'No command history');\n        } else {\n          commandHistory.forEach((histCmd, idx) => {\n            addOutput('', `${idx + 1}  ${histCmd}`);\n          });\n        }\n        setIsExecuting(false);\n        return;\n      }\n\n      if (command === 'echo') {\n        addOutput('', args.join(' '));\n        setIsExecuting(false);\n        return;\n      }\n\n      if (command === 'workflow-commands') {\n        const commands = generateWorkflowCommands();\n        if (commands.length === 0) {\n          addOutput('', 'No workflow commands generated. Add tools to your workflow.');\n        } else {\n          addOutput('', `Generated ${commands.length} command(s) from workflow:`);\n          commands.forEach((cmd, idx) => {\n            addOutput('', `[${idx + 1}] ${cmd.tool}: ${cmd.command}`);\n          });\n        }\n        setIsExecuting(false);\n        return;\n      }\n\n      if (command === 'workflow-execute') {\n        const commands = generateWorkflowCommands();\n        if (commands.length === 0) {\n          addOutput('', 'No workflow commands to execute.');\n          setIsExecuting(false);\n          return;\n        }\n        \n        addOutput('', `Executing ${commands.length} workflow command(s)...`);\n        for (let i = 0; i < commands.length; i++) {\n          const cmd = commands[i];\n          addOutput('', `[${i + 1}/${commands.length}] Executing: ${cmd.command}`);\n          \n          // Execute via API\n          await executeSystemCommand(cmd.command);\n        }\n        addOutput('', 'Workflow execution complete.');\n        setIsExecuting(false);\n        return;\n      }\n\n      // Execute system command via API\n      await executeSystemCommand(cmd);\n\n    } catch (error) {\n      addOutput('', `Error: ${error.message}`, 'error');\n    } finally {\n      setIsExecuting(false);\n    }\n  };\n\n  const executeSystemCommand = async (command) => {\n    try {\n      // Call backend API to execute command\n      const response = await fetch('/api/execute-command', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ command }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      \n      if (data.output) {\n        addOutput('', data.output);\n      }\n      if (data.error) {\n        addOutput('', data.error, 'error');\n      }\n      if (data.exitCode !== undefined) {\n        if (data.exitCode !== 0) {\n          addOutput('', `Command exited with code ${data.exitCode}`, 'error');\n        }\n      }\n    } catch (error) {\n      // If API doesn't exist, show placeholder\n      if (error.message.includes('Failed to fetch') || error.message.includes('404')) {\n        addOutput('', `Command: ${command}`, 'info');\n        addOutput('', 'Note: Backend API endpoint /api/execute-command not configured.', 'info');\n        addOutput('', 'To enable command execution, implement the API endpoint in your backend.', 'info');\n      } else {\n        addOutput('', `Error executing command: ${error.message}`, 'error');\n      }\n    }\n  };\n\n  const generateWorkflowCommands = () => {\n    if (nodes.length === 0) return [];\n\n    const executionOrder = buildExecutionOrder(nodes, connections);\n    return executionOrder.map((node) => ({\n      tool: node.name,\n      command: buildCommand(node)\n    }));\n  };\n\n  const buildExecutionOrder = (nodes, connections) => {\n    const ordered = [];\n    const visited = new Set();\n    const inDegree = new Map();\n\n    nodes.forEach(node => {\n      inDegree.set(node.id, 0);\n    });\n\n    connections.forEach(conn => {\n      inDegree.set(conn.to, (inDegree.get(conn.to) || 0) + 1);\n    });\n\n    const queue = nodes.filter(node => inDegree.get(node.id) === 0);\n\n    while (queue.length > 0) {\n      const node = queue.shift();\n      if (!visited.has(node.id)) {\n        visited.add(node.id);\n        ordered.push(node);\n\n        connections\n          .filter(conn => conn.from === node.id)\n          .forEach(conn => {\n            const targetNode = nodes.find(n => n.id === conn.to);\n            if (targetNode) {\n              const newDegree = (inDegree.get(conn.to) || 0) - 1;\n              inDegree.set(conn.to, newDegree);\n              if (newDegree === 0) {\n                queue.push(targetNode);\n              }\n            }\n          });\n      }\n    }\n\n    nodes.forEach(node => {\n      if (!visited.has(node.id)) {\n        ordered.push(node);\n      }\n    });\n\n    return ordered;\n  };\n\n  const buildCommand = (node) => {\n    const config = node.config || {};\n    const toolName = node.name.toLowerCase();\n\n    switch (toolName) {\n      case 'nmap':\n        const target = config.target || 'TARGET';\n        const scanType = config.scan_type ? config.scan_type.split(' ')[0] : '-sS';\n        const ports = config.ports || '1-1000';\n        const timing = config.timing ? config.timing.split(' ')[0] : '-T3';\n        const scripts = config.scripts ? `--script=${config.scripts}` : '';\n        const outputFlag = config.output === 'XML' ? '-oX' : config.output === 'Grepable' ? '-oG' : config.output === 'All' ? '-oA' : '';\n        const outputFile = outputFlag ? ` ${outputFlag} output` : '';\n        return `nmap ${scanType} ${timing} ${scripts} ${ports} ${target}${outputFile}`.replace(/\\s+/g, ' ').trim();\n\n      case 'subfinder':\n        const domain = config.domain || 'example.com';\n        const sources = config.sources ? `-sources ${config.sources}` : '';\n        const recursive = config.recursive ? '-recursive' : '';\n        const threads = config.threads ? `-t ${config.threads}` : '';\n        const timeout = config.timeout ? `-timeout ${config.timeout}` : '';\n        const outputFileSub = config.output ? `-o ${config.output}` : '';\n        return `subfinder -d ${domain} ${sources} ${recursive} ${threads} ${timeout} ${outputFileSub}`.replace(/\\s+/g, ' ').trim();\n\n      case 'dirsearch':\n        const url = config.url || 'https://example.com';\n        const wordlist = config.wordlist ? `-w ${config.wordlist}` : '-w /usr/share/wordlists/dirb/common.txt';\n        const extensions = config.extensions ? `-e ${config.extensions}` : '';\n        const threadsDir = config.threads ? `-t ${config.threads}` : '';\n        const recursiveDir = config.recursive ? '--recursive' : '';\n        const statusCodes = config.status_codes ? `--status-codes ${config.status_codes}` : '';\n        return `python3 dirsearch.py -u ${url} ${wordlist} ${extensions} ${threadsDir} ${recursiveDir} ${statusCodes}`.replace(/\\s+/g, ' ').trim();\n\n      case 'ghauri':\n        const ghauriUrl = config.url || 'http://example.com/vuln.php?id=1';\n        const method = config.method || 'GET';\n        const data = config.data ? `--data \"${config.data}\"` : '';\n        const level = config.level ? `--level ${config.level.split(' ')[0]}` : '';\n        const risk = config.risk ? `--risk ${config.risk}` : '';\n        const technique = config.technique ? `--technique ${config.technique}` : '';\n        return `ghauri -u \"${ghauriUrl}\" ${method === 'POST' ? `-X POST ${data}` : ''} ${level} ${risk} ${technique}`.replace(/\\s+/g, ' ').trim();\n\n      default:\n        return `# ${node.name} - Configuration needed`;\n    }\n  };\n\n  const addOutput = (prompt, text, type = 'normal') => {\n    const timestamp = new Date().toLocaleTimeString();\n    setOutput(prev => [...prev, { prompt, text, type, timestamp }]);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      executeCommand(currentCommand);\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (commandHistory.length > 0) {\n        const newIndex = historyIndex === -1 \n          ? commandHistory.length - 1 \n          : Math.max(0, historyIndex - 1);\n        setHistoryIndex(newIndex);\n        setCurrentCommand(commandHistory[newIndex]);\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (historyIndex >= 0) {\n        const newIndex = historyIndex + 1;\n        if (newIndex >= commandHistory.length) {\n          setHistoryIndex(-1);\n          setCurrentCommand('');\n        } else {\n          setHistoryIndex(newIndex);\n          setCurrentCommand(commandHistory[newIndex]);\n        }\n      }\n    } else if (e.key === 'Tab') {\n      e.preventDefault();\n      // Tab completion could be added here\n    } else if (e.key === 'c' && e.ctrlKey) {\n      e.preventDefault();\n      if (isExecuting) {\n        addOutput('', '^C', 'error');\n        setIsExecuting(false);\n      }\n    } else if (e.key === 'l' && e.ctrlKey) {\n      e.preventDefault();\n      setOutput([]);\n    }\n  };\n\n  const getOutputColor = (type) => {\n    switch (type) {\n      case 'error':\n        return 'text-red-500';\n      case 'info':\n        return 'text-cyan-400';\n      default:\n        return 'text-green-400';\n    }\n  };\n\n  if (isMinimized) {\n    return null;\n  }\n\n  return (\n    <div \n      ref={terminalRef}\n      className=\"flex flex-col bg-black rounded-lg overflow-hidden border border-gray-800 shadow-2xl\"\n      tabIndex={0}\n      onKeyDown={handleKeyDown}\n      style={{ \n        fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", Consolas, \"Courier New\", monospace',\n        width: '600px',\n        height: '500px',\n        position: 'fixed',\n        bottom: position.y || 80,\n        right: position.x || 20,\n        zIndex: 10000,\n        transform: isDragging ? 'none' : undefined\n      }}\n    >\n      {/* Terminal Header - macOS style with drag */}\n      <div \n        ref={headerRef}\n        onMouseDown={handleHeaderMouseDown}\n        className=\"flex items-center justify-between px-4 py-2 bg-gray-900 border-b border-gray-800 cursor-move\"\n      >\n        <div className=\"flex items-center space-x-2 flex-1\">\n          <div className=\"flex space-x-1.5\">\n            <div \n              className=\"w-3 h-3 rounded-full bg-red-500 hover:bg-red-600 transition-colors cursor-pointer\" \n              title=\"Close\"\n              onClick={(e) => {\n                e.stopPropagation();\n                if (onMinimize) onMinimize();\n              }}\n            ></div>\n            <div \n              className=\"w-3 h-3 rounded-full bg-yellow-500 hover:bg-yellow-600 transition-colors cursor-pointer\" \n              title=\"Minimize\"\n              onClick={(e) => {\n                e.stopPropagation();\n                if (onMinimize) onMinimize();\n              }}\n            ></div>\n            <div className=\"w-3 h-3 rounded-full bg-green-500 hover:bg-green-600 transition-colors cursor-pointer\" title=\"Maximize\"></div>\n          </div>\n          <span className=\"text-xs text-gray-500 ml-3 font-mono\">user@cyberlynx: ~</span>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setOutput([]);\n            }}\n            className=\"px-2 py-1 text-xs bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white rounded transition-colors font-mono\"\n          >\n            Clear\n          </button>\n        </div>\n      </div>\n\n      {/* Terminal Output */}\n      <div\n        ref={outputRef}\n        className=\"flex-1 overflow-y-auto p-4 text-sm bg-black text-green-400 terminal-scrollbar\"\n        style={{ \n          fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", Consolas, \"Courier New\", monospace',\n          fontSize: '13px',\n          lineHeight: '1.5',\n          scrollbarWidth: 'thin',\n          scrollbarColor: '#374151 #000000'\n        }}\n      >\n        {output.length === 0 && (\n          <div className=\"text-gray-600 mb-2\">\n            <div className=\"text-green-400\">Welcome to CyberLynX Terminal</div>\n            <div className=\"mt-2 text-gray-600\">Type 'help' for available commands</div>\n            <div className=\"text-gray-600\">Type 'workflow-commands' to see generated workflow commands</div>\n            <div className=\"mt-4 text-gray-700\">─────────────────────────────────────────────────────────────</div>\n          </div>\n        )}\n        {output.map((item, index) => (\n          <div key={index} className=\"mb-0.5 leading-relaxed\">\n            {item.prompt && (\n              <span className=\"text-gray-300\">\n                <span className=\"text-green-400 font-semibold\">user</span>\n                <span className=\"text-gray-500\">@</span>\n                <span className=\"text-blue-400 font-semibold\">cyberlynx</span>\n                <span className=\"text-gray-500\">:</span>\n                <span className=\"text-yellow-400\">{item.prompt}</span>\n                <span className=\"text-gray-500\">$</span>\n                {' '}\n              </span>\n            )}\n            <span className={getOutputColor(item.type)} style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\n              {item.text}\n            </span>\n          </div>\n        ))}\n        {isExecuting && (\n          <span className=\"inline-block w-2 h-4 bg-green-400 animate-pulse ml-1\" style={{ verticalAlign: 'middle' }}></span>\n        )}\n      </div>\n\n      {/* Command Input */}\n      <div className=\"border-t border-gray-800 bg-black p-2\">\n        <div className=\"flex items-center\">\n          <span className=\"text-gray-300 mr-1 select-none\" style={{ fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", Consolas, \"Courier New\", monospace' }}>\n            <span className=\"text-green-400 font-semibold\">user</span>\n            <span className=\"text-gray-500\">@</span>\n            <span className=\"text-blue-400 font-semibold\">cyberlynx</span>\n            <span className=\"text-gray-500\">:</span>\n            <span className=\"text-yellow-400\">{currentDirectory}</span>\n            <span className=\"text-gray-500\">$</span>\n            {' '}\n          </span>\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={currentCommand}\n            onChange={(e) => setCurrentCommand(e.target.value)}\n            onKeyDown={handleKeyDown}\n            className=\"flex-1 bg-transparent text-green-400 outline-none ml-1 font-mono caret-green-400\"\n            style={{ \n              fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", Consolas, \"Courier New\", monospace',\n              fontSize: '13px'\n            }}\n            placeholder=\"\"\n            disabled={isExecuting}\n            autoFocus\n            spellCheck={false}\n          />\n          {isExecuting && (\n            <span className=\"text-gray-500 ml-2 animate-pulse\">⏳</span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WorkflowTerminal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}