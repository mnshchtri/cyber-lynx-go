{"ast":null,"code":"var _jsxFileName = \"/Users/mnsh/Desktop/cyber-lynx-go/frontend/src/components/workflow/WorkflowCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport ReactFlow, { MiniMap, Controls, Background, useNodesState, useEdgesState, addEdge, Panel } from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport ToolNode from './ToolNode';\nimport ToolConfigModal from './ToolConfigModal';\nimport ToolDropdown from './ToolDropdown';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst nodeTypes = {\n  toolNode: ToolNode\n};\nconst initialNodes = [];\nconst initialEdges = [];\nlet id = 0;\nconst getId = () => `dndnode_${id++}`;\nconst WorkflowCanvas = () => {\n  _s();\n  const reactFlowWrapper = useRef(null);\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [configModalOpen, setConfigModalOpen] = useState(false);\n  const [configTool, setConfigTool] = useState(null);\n  const [workflowName, setWorkflowName] = useState('');\n  const [saveModalOpen, setSaveModalOpen] = useState(false);\n  const [availableTools, setAvailableTools] = useState([{\n    name: 'Nmap',\n    icon: 'nmap',\n    color: '#FF6D1F'\n  }, {\n    name: 'Subfinder',\n    icon: 'subfinder',\n    color: '#1F7BFF'\n  }, {\n    name: 'Dirsearch',\n    icon: 'dirsearch',\n    color: '#32CD32'\n  }, {\n    name: 'Ghauri',\n    icon: 'ghauri',\n    color: '#FFD700'\n  }]);\n\n  // Load workflow from localStorage on mount\n  useEffect(() => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          const latest = workflows[workflows.length - 1];\n          setNodes(latest.nodes || []);\n          setEdges(latest.edges || []);\n          setWorkflowName(latest.name || '');\n          // Reset id counter based on loaded nodes\n          const maxId = latest.nodes.reduce((max, node) => {\n            const nodeIdNum = parseInt(node.id.replace('dndnode_', ''), 10);\n            return isNaN(nodeIdNum) ? max : Math.max(max, nodeIdNum);\n          }, -1);\n          id = maxId + 1;\n        }\n      } catch (e) {\n        console.error('Error loading workflow:', e);\n      }\n    }\n  }, [setNodes, setEdges]);\n  const onConnect = useCallback(params => setEdges(eds => addEdge(params, eds)), [setEdges]);\n  const onDragOver = useCallback(event => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n  const onDrop = useCallback(event => {\n    event.preventDefault();\n    const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n    const type = event.dataTransfer.getData('application/reactflow');\n    const toolData = JSON.parse(event.dataTransfer.getData('application/json'));\n    if (typeof type === 'undefined' || !type) {\n      return;\n    }\n    const position = reactFlowInstance.project({\n      x: event.clientX - reactFlowBounds.left,\n      y: event.clientY - reactFlowBounds.top\n    });\n    const newNode = {\n      id: getId(),\n      type: 'toolNode',\n      position,\n      data: {\n        label: toolData.name,\n        tool: toolData,\n        config: {},\n        onEdit: node => {\n          setSelectedNode(node.id);\n          setConfigTool(node.data.tool);\n          setConfigModalOpen(true);\n        },\n        onDelete: nodeId => handleDeleteNode(nodeId)\n      }\n    };\n    setNodes(nds => nds.concat(newNode));\n  }, [reactFlowInstance, setNodes]);\n  const handleSaveConfig = (nodeId, config) => {\n    setNodes(prevNodes => prevNodes.map(node => node.id === nodeId ? {\n      ...node,\n      data: {\n        ...node.data,\n        config: config\n      }\n    } : node));\n  };\n  const handleDeleteNode = useCallback(nodeId => {\n    setNodes(prevNodes => prevNodes.filter(node => node.id !== nodeId));\n    setEdges(prevEdges => prevEdges.filter(edge => edge.source !== nodeId && edge.target !== nodeId));\n    if (selectedNode === nodeId) {\n      setSelectedNode(null);\n    }\n  }, [setNodes, setEdges, selectedNode]);\n  const handleSave = () => {\n    if (!workflowName.trim()) {\n      alert('Please enter a workflow name');\n      return;\n    }\n    if (reactFlowInstance) {\n      const flow = reactFlowInstance.toObject();\n      const workflow = {\n        id: Date.now().toString(),\n        name: workflowName,\n        nodes: flow.nodes,\n        edges: flow.edges,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      };\n      const saved = localStorage.getItem('cyberlynx-workflows');\n      let workflows = saved ? JSON.parse(saved) : [];\n      const existingIndex = workflows.findIndex(w => w.name === workflowName);\n      if (existingIndex >= 0) {\n        workflows[existingIndex] = {\n          ...workflow,\n          id: workflows[existingIndex].id\n        };\n      } else {\n        workflows.push(workflow);\n      }\n      localStorage.setItem('cyberlynx-workflows', JSON.stringify(workflows));\n      setSaveModalOpen(false);\n      alert('Workflow saved successfully!');\n    }\n  };\n  const handleLoad = () => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          const workflowNames = workflows.map(w => w.name);\n          const selected = prompt(`Enter workflow name to load:\\n\\nAvailable: ${workflowNames.join(', ')}`);\n          if (selected) {\n            const workflow = workflows.find(w => w.name === selected);\n            if (workflow) {\n              setNodes(workflow.nodes || []);\n              setEdges(workflow.edges || []);\n              setWorkflowName(workflow.name || '');\n              // Reset id counter based on loaded nodes\n              const maxId = workflow.nodes.reduce((max, node) => {\n                const nodeIdNum = parseInt(node.id.replace('dndnode_', ''), 10);\n                return isNaN(nodeIdNum) ? max : Math.max(max, nodeIdNum);\n              }, -1);\n              id = maxId + 1;\n            } else {\n              alert('Workflow not found');\n            }\n          }\n        }\n      } catch (e) {\n        alert('Error loading workflow');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-0 left-0 right-0 z-30 bg-surface-light border-b border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: workflowName,\n          onChange: e => setWorkflowName(e.target.value),\n          placeholder: \"Workflow name...\",\n          className: \"px-3 py-1.5 text-sm bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSaveModalOpen(true),\n          className: \"px-3 py-1.5 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors flex items-center space-x-1.5\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLoad,\n          className: \"px-3 py-1.5 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors flex items-center space-x-1.5\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Load\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-14 left-0 z-20 bg-surface-light border-r border-gray-200 dark:border-gray-700 p-3\",\n      children: [/*#__PURE__*/_jsxDEV(ToolDropdown, {\n        tools: availableTools,\n        onAddTool: tool => {\n          // This is for direct adding, not drag-and-drop\n          const newNode = {\n            id: getId(),\n            type: 'toolNode',\n            position: {\n              x: 250,\n              y: 50\n            },\n            // Default position for direct add\n            data: {\n              label: tool.name,\n              tool: tool,\n              config: {},\n              onEdit: node => {\n                setSelectedNode(node.id);\n                setConfigTool(node.data.tool);\n                setConfigModalOpen(true);\n              },\n              onDelete: nodeId => handleDeleteNode(nodeId)\n            }\n          };\n          setNodes(nds => nds.concat(newNode));\n        },\n        onCustomize: customTools => {\n          localStorage.setItem('cyberlynx-custom-tools', JSON.stringify(customTools));\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), nodes.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-3 border-t border-gray-200 dark:border-gray-700\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setNodes([]);\n            setEdges([]);\n            setSelectedNode(null);\n            setWorkflowName('');\n          },\n          className: \"w-10 h-10 flex items-center justify-center bg-danger hover:bg-red-600 text-white rounded-lg transition-colors\",\n          title: \"Clear All\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reactflow-wrapper absolute top-14 left-12 right-0 bottom-0\",\n      ref: reactFlowWrapper,\n      children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n        nodes: nodes,\n        edges: edges,\n        onNodesChange: onNodesChange,\n        onEdgesChange: onEdgesChange,\n        onConnect: onConnect,\n        onInit: setReactFlowInstance,\n        onDrop: onDrop,\n        onDragOver: onDragOver,\n        nodeTypes: nodeTypes,\n        fitView: true,\n        className: \"bg-background-primary\",\n        onNodeClick: (event, node) => setSelectedNode(node.id),\n        onPaneClick: () => setSelectedNode(null),\n        children: [/*#__PURE__*/_jsxDEV(MiniMap, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Background, {\n          variant: \"dots\",\n          gap: 12,\n          size: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Panel, {\n          position: \"bottom-right\",\n          children: selectedNode && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDeleteNode(selectedNode),\n            className: \"px-3 py-1.5 text-sm bg-danger hover:bg-red-600 text-white rounded-lg transition-colors flex items-center space-x-1.5\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-4 h-4\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Delete Selected Node\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this), configTool && /*#__PURE__*/_jsxDEV(ToolConfigModal, {\n      tool: configTool,\n      isOpen: configModalOpen,\n      onClose: () => {\n        setConfigModalOpen(false);\n        setConfigTool(null);\n      },\n      onSave: handleSaveConfig\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }, this), saveModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      onClick: () => setSaveModalOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-surface-light rounded-xl p-6 max-w-md w-full mx-4\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-text-primary mb-4\",\n          children: \"Save Workflow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: workflowName,\n          onChange: e => setWorkflowName(e.target.value),\n          placeholder: \"Enter workflow name...\",\n          className: \"w-full px-3 py-2 bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary mb-4\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSaveModalOpen(false),\n            className: \"px-4 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSave,\n            className: \"px-4 py-2 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n};\n_s(WorkflowCanvas, \"7EJPmHujyUBV3l/Sd4EAzd0HZRA=\", false, function () {\n  return [useNodesState, useEdgesState];\n});\n_c = WorkflowCanvas;\nexport default WorkflowCanvas;\nvar _c;\n$RefreshReg$(_c, \"WorkflowCanvas\");","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","ReactFlow","MiniMap","Controls","Background","useNodesState","useEdgesState","addEdge","Panel","ToolNode","ToolConfigModal","ToolDropdown","jsxDEV","_jsxDEV","Fragment","_Fragment","nodeTypes","toolNode","initialNodes","initialEdges","id","getId","WorkflowCanvas","_s","reactFlowWrapper","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","reactFlowInstance","setReactFlowInstance","selectedNode","setSelectedNode","configModalOpen","setConfigModalOpen","configTool","setConfigTool","workflowName","setWorkflowName","saveModalOpen","setSaveModalOpen","availableTools","setAvailableTools","name","icon","color","saved","localStorage","getItem","workflows","JSON","parse","length","latest","maxId","reduce","max","node","nodeIdNum","parseInt","replace","isNaN","Math","e","console","error","onConnect","params","eds","onDragOver","event","preventDefault","dataTransfer","dropEffect","onDrop","reactFlowBounds","current","getBoundingClientRect","type","getData","toolData","position","project","x","clientX","left","y","clientY","top","newNode","data","label","tool","config","onEdit","onDelete","nodeId","handleDeleteNode","nds","concat","handleSaveConfig","prevNodes","map","filter","prevEdges","edge","source","target","handleSave","trim","alert","flow","toObject","workflow","Date","now","toString","createdAt","toISOString","updatedAt","existingIndex","findIndex","w","push","setItem","stringify","handleLoad","workflowNames","selected","prompt","join","find","className","children","value","onChange","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","tools","onAddTool","onCustomize","customTools","title","ref","onInit","fitView","onNodeClick","onPaneClick","variant","gap","size","isOpen","onClose","onSave","stopPropagation","autoFocus","_c","$RefreshReg$"],"sources":["/Users/mnsh/Desktop/cyber-lynx-go/frontend/src/components/workflow/WorkflowCanvas.js"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from 'react';\nimport ReactFlow, { MiniMap, Controls, Background, useNodesState, useEdgesState, addEdge, Panel } from 'reactflow';\nimport 'reactflow/dist/style.css';\n\nimport ToolNode from './ToolNode';\nimport ToolConfigModal from './ToolConfigModal';\nimport ToolDropdown from './ToolDropdown';\n\nconst nodeTypes = {\n  toolNode: ToolNode,\n};\n\nconst initialNodes = [];\nconst initialEdges = [];\n\nlet id = 0;\nconst getId = () => `dndnode_${id++}`;\n\nconst WorkflowCanvas = () => {\n  const reactFlowWrapper = useRef(null);\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [configModalOpen, setConfigModalOpen] = useState(false);\n  const [configTool, setConfigTool] = useState(null);\n  const [workflowName, setWorkflowName] = useState('');\n  const [saveModalOpen, setSaveModalOpen] = useState(false);\n\n  const [availableTools, setAvailableTools] = useState([\n    { name: 'Nmap', icon: 'nmap', color: '#FF6D1F' },\n    { name: 'Subfinder', icon: 'subfinder', color: '#1F7BFF' },\n    { name: 'Dirsearch', icon: 'dirsearch', color: '#32CD32' },\n    { name: 'Ghauri', icon: 'ghauri', color: '#FFD700' }\n  ]);\n\n  // Load workflow from localStorage on mount\n  useEffect(() => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          const latest = workflows[workflows.length - 1];\n          setNodes(latest.nodes || []);\n          setEdges(latest.edges || []);\n          setWorkflowName(latest.name || '');\n          // Reset id counter based on loaded nodes\n          const maxId = latest.nodes.reduce((max, node) => {\n            const nodeIdNum = parseInt(node.id.replace('dndnode_', ''), 10);\n            return isNaN(nodeIdNum) ? max : Math.max(max, nodeIdNum);\n          }, -1);\n          id = maxId + 1;\n        }\n      } catch (e) {\n        console.error('Error loading workflow:', e);\n      }\n    }\n  }, [setNodes, setEdges]);\n\n  const onConnect = useCallback((params) => setEdges((eds) => addEdge(params, eds)), [setEdges]);\n\n  const onDragOver = useCallback((event) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n\n  const onDrop = useCallback(\n    (event) => {\n      event.preventDefault();\n\n      const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n      const type = event.dataTransfer.getData('application/reactflow');\n      const toolData = JSON.parse(event.dataTransfer.getData('application/json'));\n\n      if (typeof type === 'undefined' || !type) {\n        return;\n      }\n\n      const position = reactFlowInstance.project({\n        x: event.clientX - reactFlowBounds.left,\n        y: event.clientY - reactFlowBounds.top,\n      });\n\n      const newNode = {\n        id: getId(),\n        type: 'toolNode',\n        position,\n        data: {\n          label: toolData.name,\n          tool: toolData,\n          config: {},\n          onEdit: (node) => {\n            setSelectedNode(node.id);\n            setConfigTool(node.data.tool);\n            setConfigModalOpen(true);\n          },\n          onDelete: (nodeId) => handleDeleteNode(nodeId),\n        },\n      };\n\n      setNodes((nds) => nds.concat(newNode));\n    },\n    [reactFlowInstance, setNodes]\n  );\n\n  const handleSaveConfig = (nodeId, config) => {\n    setNodes((prevNodes) =>\n      prevNodes.map((node) =>\n        node.id === nodeId\n          ? { ...node, data: { ...node.data, config: config } }\n          : node\n      )\n    );\n  };\n\n  const handleDeleteNode = useCallback((nodeId) => {\n    setNodes((prevNodes) => prevNodes.filter((node) => node.id !== nodeId));\n    setEdges((prevEdges) =>\n      prevEdges.filter((edge) => edge.source !== nodeId && edge.target !== nodeId)\n    );\n    if (selectedNode === nodeId) {\n      setSelectedNode(null);\n    }\n  }, [setNodes, setEdges, selectedNode]);\n\n  const handleSave = () => {\n    if (!workflowName.trim()) {\n      alert('Please enter a workflow name');\n      return;\n    }\n\n    if (reactFlowInstance) {\n      const flow = reactFlowInstance.toObject();\n      const workflow = {\n        id: Date.now().toString(),\n        name: workflowName,\n        nodes: flow.nodes,\n        edges: flow.edges,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n\n      const saved = localStorage.getItem('cyberlynx-workflows');\n      let workflows = saved ? JSON.parse(saved) : [];\n\n      const existingIndex = workflows.findIndex((w) => w.name === workflowName);\n      if (existingIndex >= 0) {\n        workflows[existingIndex] = { ...workflow, id: workflows[existingIndex].id };\n      } else {\n        workflows.push(workflow);\n      }\n\n      localStorage.setItem('cyberlynx-workflows', JSON.stringify(workflows));\n      setSaveModalOpen(false);\n      alert('Workflow saved successfully!');\n    }\n  };\n\n  const handleLoad = () => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          const workflowNames = workflows.map((w) => w.name);\n          const selected = prompt(\n            `Enter workflow name to load:\\n\\nAvailable: ${workflowNames.join(', ')}`\n          );\n          if (selected) {\n            const workflow = workflows.find((w) => w.name === selected);\n            if (workflow) {\n              setNodes(workflow.nodes || []);\n              setEdges(workflow.edges || []);\n              setWorkflowName(workflow.name || '');\n              // Reset id counter based on loaded nodes\n              const maxId = workflow.nodes.reduce((max, node) => {\n                const nodeIdNum = parseInt(node.id.replace('dndnode_', ''), 10);\n                return isNaN(nodeIdNum) ? max : Math.max(max, nodeIdNum);\n              }, -1);\n              id = maxId + 1;\n            } else {\n              alert('Workflow not found');\n            }\n          }\n        }\n      } catch (e) {\n        alert('Error loading workflow');\n      }\n    }\n  };\n\n  return (\n    <div className=\"relative w-full h-full\">\n      {/* Top Bar - Minimalist */}\n      <div className=\"absolute top-0 left-0 right-0 z-30 bg-surface-light border-b border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <input\n            type=\"text\"\n            value={workflowName}\n            onChange={(e) => setWorkflowName(e.target.value)}\n            placeholder=\"Workflow name...\"\n            className=\"px-3 py-1.5 text-sm bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary\"\n          />\n          <button\n            onClick={() => setSaveModalOpen(true)}\n            className=\"px-3 py-1.5 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors flex items-center space-x-1.5\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\n            </svg>\n            <span>Save</span>\n          </button>\n          <button\n            onClick={handleLoad}\n            className=\"px-3 py-1.5 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors flex items-center space-x-1.5\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n            </svg>\n            <span>Load</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Toolbar - Minimalist Sidebar with Dropdown */}\n      <div className=\"absolute top-14 left-0 z-20 bg-surface-light border-r border-gray-200 dark:border-gray-700 p-3\">\n        <ToolDropdown\n          tools={availableTools}\n          onAddTool={(tool) => {\n            // This is for direct adding, not drag-and-drop\n            const newNode = {\n              id: getId(),\n              type: 'toolNode',\n              position: { x: 250, y: 50 }, // Default position for direct add\n              data: {\n                label: tool.name,\n                tool: tool,\n                config: {},\n                onEdit: (node) => {\n                  setSelectedNode(node.id);\n                  setConfigTool(node.data.tool);\n                  setConfigModalOpen(true);\n                },\n                onDelete: (nodeId) => handleDeleteNode(nodeId),\n              },\n            };\n            setNodes((nds) => nds.concat(newNode));\n          }}\n          onCustomize={(customTools) => {\n            localStorage.setItem('cyberlynx-custom-tools', JSON.stringify(customTools));\n          }}\n        />\n        {nodes.length > 0 && (\n          <>\n            <div className=\"my-3 border-t border-gray-200 dark:border-gray-700\"></div>\n            <button\n              onClick={() => {\n                setNodes([]);\n                setEdges([]);\n                setSelectedNode(null);\n                setWorkflowName('');\n              }}\n              className=\"w-10 h-10 flex items-center justify-center bg-danger hover:bg-red-600 text-white rounded-lg transition-colors\"\n              title=\"Clear All\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n              </svg>\n            </button>\n          </>\n        )}\n      </div>\n\n      {/* React Flow Canvas */}\n      <div className=\"reactflow-wrapper absolute top-14 left-12 right-0 bottom-0\" ref={reactFlowWrapper}>\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={onNodesChange}\n          onEdgesChange={onEdgesChange}\n          onConnect={onConnect}\n          onInit={setReactFlowInstance}\n          onDrop={onDrop}\n          onDragOver={onDragOver}\n          nodeTypes={nodeTypes}\n          fitView\n          className=\"bg-background-primary\"\n          onNodeClick={(event, node) => setSelectedNode(node.id)}\n          onPaneClick={() => setSelectedNode(null)}\n        >\n          <MiniMap />\n          <Controls />\n          <Background variant=\"dots\" gap={12} size={1} />\n          <Panel position=\"bottom-right\">\n            {selectedNode && (\n              <button\n                onClick={() => handleDeleteNode(selectedNode)}\n                className=\"px-3 py-1.5 text-sm bg-danger hover:bg-red-600 text-white rounded-lg transition-colors flex items-center space-x-1.5\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                </svg>\n                <span>Delete Selected Node</span>\n              </button>\n            )}\n          </Panel>\n        </ReactFlow>\n      </div>\n\n      {/* Configuration Modal */}\n      {configTool && (\n        <ToolConfigModal\n          tool={configTool}\n          isOpen={configModalOpen}\n          onClose={() => {\n            setConfigModalOpen(false);\n            setConfigTool(null);\n          }}\n          onSave={handleSaveConfig}\n        />\n      )}\n\n      {/* Save Modal */}\n      {saveModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\" onClick={() => setSaveModalOpen(false)}>\n          <div className=\"bg-surface-light rounded-xl p-6 max-w-md w-full mx-4\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"text-lg font-semibold text-text-primary mb-4\">Save Workflow</h3>\n            <input\n              type=\"text\"\n              value={workflowName}\n              onChange={(e) => setWorkflowName(e.target.value)}\n              placeholder=\"Enter workflow name...\"\n              className=\"w-full px-3 py-2 bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary mb-4\"\n              autoFocus\n            />\n            <div className=\"flex justify-end space-x-2\">\n              <button\n                onClick={() => setSaveModalOpen(false)}\n                className=\"px-4 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSave}\n                className=\"px-4 py-2 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WorkflowCanvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}