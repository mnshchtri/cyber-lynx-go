{"ast":null,"code":"var _jsxFileName = \"/Users/mnsh/Desktop/cyber-lynx-go/frontend/src/components/workflow/WorkflowCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport ToolNode from './ToolNode';\nimport ToolConfigModal from './ToolConfigModal';\nimport ToolDropdown from './ToolDropdown';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst WorkflowCanvas = () => {\n  _s();\n  const [nodes, setNodes] = useState([]);\n  const [connections, setConnections] = useState([]);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [configModalOpen, setConfigModalOpen] = useState(false);\n  const [configTool, setConfigTool] = useState(null);\n  const [dragging, setDragging] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [connectingFrom, setConnectingFrom] = useState(null);\n  const [zoom, setZoom] = useState(1);\n  const [pan, setPan] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isPanning, setIsPanning] = useState(false);\n  const [panStart, setPanStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const [workflowName, setWorkflowName] = useState('');\n  const [saveModalOpen, setSaveModalOpen] = useState(false);\n  const canvasRef = useRef(null);\n  const containerRef = useRef(null);\n  const nodeIdCounter = useRef(0);\n  const availableTools = [{\n    name: 'Nmap',\n    icon: 'nmap'\n  }, {\n    name: 'Subfinder',\n    icon: 'subfinder'\n  }, {\n    name: 'Dirsearch',\n    icon: 'dirsearch'\n  }, {\n    name: 'Ghauri',\n    icon: 'ghauri'\n  }];\n\n  // Load workflow from localStorage on mount\n  useEffect(() => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          // Load the most recent workflow\n          const latest = workflows[workflows.length - 1];\n          setNodes(latest.nodes || []);\n          setConnections(latest.connections || []);\n          setWorkflowName(latest.name || '');\n          if (latest.nodeIdCounter) {\n            nodeIdCounter.current = latest.nodeIdCounter;\n          }\n        }\n      } catch (e) {\n        console.error('Error loading workflow:', e);\n      }\n    }\n  }, []);\n  const addNode = (tool, position = null) => {\n    const toolName = typeof tool === 'string' ? tool : tool.name;\n    const newId = `node-${nodeIdCounter.current++}`;\n    const newNode = {\n      id: newId,\n      name: toolName,\n      position: position || {\n        x: 200,\n        y: 200\n      },\n      config: {},\n      customColor: typeof tool === 'object' && tool.color ? tool.color : null\n    };\n    setNodes([...nodes, newNode]);\n  };\n  const handleNodeClick = node => {\n    setSelectedNode(node.id);\n    setConfigTool(node);\n    setConfigModalOpen(true);\n  };\n  const handleSaveConfig = (nodeId, config) => {\n    setNodes(prevNodes => prevNodes.map(node => node.id === nodeId ? {\n      ...node,\n      config\n    } : node));\n  };\n  const handleDeleteNode = nodeId => {\n    setNodes(prevNodes => prevNodes.filter(node => node.id !== nodeId));\n    setConnections(prevConnections => prevConnections.filter(conn => conn.from !== nodeId && conn.to !== nodeId));\n    if (selectedNode === nodeId) {\n      setSelectedNode(null);\n    }\n  };\n  const handleNodeMouseDown = (nodeId, e) => {\n    e.stopPropagation();\n    const node = nodes.find(n => n.id === nodeId);\n    if (node) {\n      var _containerRef$current;\n      setDragging(nodeId);\n      const rect = (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.getBoundingClientRect();\n      if (rect) {\n        setDragOffset({\n          x: (e.clientX - rect.left - pan.x) / zoom - node.position.x,\n          y: (e.clientY - rect.top - pan.y) / zoom - node.position.y\n        });\n      }\n    }\n  };\n  const handleConnectionPointClick = (nodeId, pointType, e) => {\n    e.stopPropagation();\n    if (pointType === 'output') {\n      if (connectingFrom === nodeId) {\n        setConnectingFrom(null);\n      } else {\n        setConnectingFrom(nodeId);\n      }\n    } else if (pointType === 'input' && connectingFrom && connectingFrom !== nodeId) {\n      const existingConnection = connections.find(conn => conn.from === connectingFrom && conn.to === nodeId);\n      if (!existingConnection) {\n        setConnections([...connections, {\n          from: connectingFrom,\n          to: nodeId\n        }]);\n      }\n      setConnectingFrom(null);\n    }\n  };\n  const handleMouseMove = e => {\n    if (isPanning && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      setPan({\n        x: e.clientX - rect.left - panStart.x,\n        y: e.clientY - rect.top - panStart.y\n      });\n    } else if (dragging && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      setNodes(prevNodes => prevNodes.map(node => node.id === dragging ? {\n        ...node,\n        position: {\n          x: (e.clientX - rect.left - pan.x) / zoom - dragOffset.x,\n          y: (e.clientY - rect.top - pan.y) / zoom - dragOffset.y\n        }\n      } : node));\n    }\n  };\n  const handleMouseDown = e => {\n    if (e.button === 1 || e.button === 0 && e.ctrlKey) {\n      var _containerRef$current2;\n      e.preventDefault();\n      setIsPanning(true);\n      const rect = (_containerRef$current2 = containerRef.current) === null || _containerRef$current2 === void 0 ? void 0 : _containerRef$current2.getBoundingClientRect();\n      if (rect) {\n        setPanStart({\n          x: e.clientX - rect.left - pan.x,\n          y: e.clientY - rect.top - pan.y\n        });\n      }\n    }\n  };\n  const handleMouseUp = () => {\n    setDragging(null);\n    setIsPanning(false);\n  };\n  const handleWheel = e => {\n    var _containerRef$current3;\n    e.preventDefault();\n    const rect = (_containerRef$current3 = containerRef.current) === null || _containerRef$current3 === void 0 ? void 0 : _containerRef$current3.getBoundingClientRect();\n    if (rect) {\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n      const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;\n      const newZoom = Math.max(0.3, Math.min(2, zoom * zoomFactor));\n      const zoomChange = newZoom / zoom;\n      setPan({\n        x: mouseX - (mouseX - pan.x) * zoomChange,\n        y: mouseY - (mouseY - pan.y) * zoomChange\n      });\n      setZoom(newZoom);\n    }\n  };\n  useEffect(() => {\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [dragging, dragOffset, isPanning, panStart, pan, zoom]);\n  const handleZoomIn = () => setZoom(prev => Math.min(2, prev + 0.1));\n  const handleZoomOut = () => setZoom(prev => Math.max(0.3, prev - 0.1));\n  const handleResetZoom = () => {\n    setZoom(1);\n    setPan({\n      x: 0,\n      y: 0\n    });\n  };\n  const handleSave = () => {\n    if (!workflowName.trim()) {\n      alert('Please enter a workflow name');\n      return;\n    }\n    const workflow = {\n      id: Date.now().toString(),\n      name: workflowName,\n      nodes,\n      connections,\n      nodeIdCounter: nodeIdCounter.current,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    let workflows = saved ? JSON.parse(saved) : [];\n\n    // Update existing or add new\n    const existingIndex = workflows.findIndex(w => w.name === workflowName);\n    if (existingIndex >= 0) {\n      workflows[existingIndex] = {\n        ...workflow,\n        id: workflows[existingIndex].id\n      };\n    } else {\n      workflows.push(workflow);\n    }\n    localStorage.setItem('cyberlynx-workflows', JSON.stringify(workflows));\n    setSaveModalOpen(false);\n    alert('Workflow saved successfully!');\n  };\n  const handleLoad = () => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          const workflowNames = workflows.map(w => w.name);\n          const selected = prompt(`Enter workflow name to load:\\n\\nAvailable: ${workflowNames.join(', ')}`);\n          if (selected) {\n            const workflow = workflows.find(w => w.name === selected);\n            if (workflow) {\n              setNodes(workflow.nodes || []);\n              setConnections(workflow.connections || []);\n              setWorkflowName(workflow.name || '');\n              if (workflow.nodeIdCounter) {\n                nodeIdCounter.current = workflow.nodeIdCounter;\n              }\n              setZoom(1);\n              setPan({\n                x: 0,\n                y: 0\n              });\n            } else {\n              alert('Workflow not found');\n            }\n          }\n        } else {\n          alert('No saved workflows found');\n        }\n      } catch (e) {\n        alert('Error loading workflow');\n      }\n    } else {\n      alert('No saved workflows found');\n    }\n  };\n  const drawConnection = (fromNode, toNode) => {\n    const fromX = (fromNode.position.x + 60) * zoom + pan.x;\n    const fromY = (fromNode.position.y + 70) * zoom + pan.y;\n    const toX = (toNode.position.x + 60) * zoom + pan.x;\n    const toY = toNode.position.y * zoom + pan.y;\n    const midY = (fromY + toY) / 2;\n    return /*#__PURE__*/_jsxDEV(\"path\", {\n      d: `M ${fromX} ${fromY} C ${fromX} ${midY}, ${toX} ${midY}, ${toX} ${toY}`,\n      stroke: \"rgba(255, 109, 31, 0.5)\",\n      strokeWidth: 2 * zoom,\n      fill: \"none\",\n      markerEnd: \"url(#arrowhead)\",\n      className: \"cursor-pointer hover:stroke-primary transition-colors\"\n    }, `${fromNode.id}-${toNode.id}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-0 left-0 right-0 z-30 bg-surface-light border-b border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: workflowName,\n          onChange: e => setWorkflowName(e.target.value),\n          placeholder: \"Workflow name...\",\n          className: \"px-3 py-1.5 text-sm bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSaveModalOpen(true),\n          className: \"px-3 py-1.5 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors flex items-center space-x-1.5\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLoad,\n          className: \"px-3 py-1.5 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors flex items-center space-x-1.5\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Load\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleZoomOut,\n          className: \"w-8 h-8 flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\",\n          title: \"Zoom Out\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs text-text-secondary min-w-[3rem] text-center\",\n          children: [Math.round(zoom * 100), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleZoomIn,\n          className: \"w-8 h-8 flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\",\n          title: \"Zoom In\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleResetZoom,\n          className: \"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\",\n          title: \"Reset View\",\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-14 left-0 z-20 bg-surface-light border-r border-gray-200 dark:border-gray-700 p-3\",\n      children: [/*#__PURE__*/_jsxDEV(ToolDropdown, {\n        tools: availableTools,\n        onAddTool: (tool, position) => addNode(tool, position),\n        onCustomize: customTools => {\n          // Store custom tools if needed\n          localStorage.setItem('cyberlynx-custom-tools', JSON.stringify(customTools));\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), nodes.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-3 border-t border-gray-200 dark:border-gray-700\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setNodes([]);\n            setConnections([]);\n            setSelectedNode(null);\n            setConnectingFrom(null);\n            setWorkflowName('');\n          },\n          className: \"w-10 h-10 flex items-center justify-center bg-danger hover:bg-red-600 text-white rounded-lg transition-colors\",\n          title: \"Clear All\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      \"data-canvas\": \"true\",\n      className: \"absolute top-14 left-12 right-0 bottom-0 bg-background-primary overflow-hidden\",\n      style: {\n        cursor: isPanning ? 'grabbing' : 'default'\n      },\n      onMouseDown: handleMouseDown,\n      onWheel: handleWheel,\n      onClick: () => {\n        setSelectedNode(null);\n        setConnectingFrom(null);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"absolute inset-0 pointer-events-none\",\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n          children: /*#__PURE__*/_jsxDEV(\"marker\", {\n            id: \"arrowhead\",\n            markerWidth: \"10\",\n            markerHeight: \"10\",\n            refX: \"9\",\n            refY: \"3\",\n            orient: \"auto\",\n            children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n              points: \"0 0, 10 3, 0 6\",\n              fill: \"rgba(255, 109, 31, 0.5)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), connections.map((conn, index) => {\n          const fromNode = nodes.find(n => n.id === conn.from);\n          const toNode = nodes.find(n => n.id === conn.to);\n          if (fromNode && toNode) {\n            return /*#__PURE__*/_jsxDEV(\"g\", {\n              children: [drawConnection(fromNode, toNode), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: `M ${(fromNode.position.x + 60) * zoom + pan.x} ${(fromNode.position.y + 70) * zoom + pan.y} C ${(fromNode.position.x + 60) * zoom + pan.x} ${((fromNode.position.y + 70) * zoom + pan.y + toNode.position.y * zoom + pan.y) / 2}, ${(toNode.position.x + 60) * zoom + pan.x} ${((fromNode.position.y + 70) * zoom + pan.y + toNode.position.y * zoom + pan.y) / 2}, ${(toNode.position.x + 60) * zoom + pan.x} ${toNode.position.y * zoom + pan.y}`,\n                stroke: \"transparent\",\n                strokeWidth: 20 * zoom,\n                fill: \"none\",\n                className: \"cursor-pointer pointer-events-auto\",\n                onClick: e => {\n                  e.stopPropagation();\n                  if (e.detail === 2) {\n                    setConnections(prev => prev.filter((c, i) => i !== index));\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 19\n              }, this)]\n            }, `${conn.from}-${conn.to}-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this);\n          }\n          return null;\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: canvasRef,\n        \"data-transform\": \"true\",\n        className: \"absolute\",\n        style: {\n          transform: `translate(${pan.x}px, ${pan.y}px) scale(${zoom})`,\n          transformOrigin: '0 0'\n        },\n        children: nodes.map(node => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(ToolNode, {\n            tool: node,\n            position: node.position,\n            onClick: () => handleNodeClick(node),\n            isSelected: selectedNode === node.id,\n            onConnectionPointClick: handleConnectionPointClick,\n            isConnectingFrom: connectingFrom === node.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this), selectedNode === node.id && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              handleDeleteNode(node.id);\n            },\n            className: \"absolute -top-2 -right-2 w-5 h-5 bg-danger hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg z-20 transition-all duration-200\",\n            style: {\n              left: `${node.position.x + 120}px`,\n              top: `${node.position.y}px`\n            },\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-3 h-3\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M6 18L18 6M6 6l12 12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute cursor-move\",\n            style: {\n              left: `${node.position.x}px`,\n              top: `${node.position.y}px`,\n              width: '120px',\n              height: '60px'\n            },\n            onMouseDown: e => {\n              if (e.target === e.currentTarget || !e.target.closest('[class*=\"connection\"]')) {\n                handleNodeMouseDown(node.id, e);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 15\n          }, this)]\n        }, node.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this), nodes.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-16 h-16 mx-auto text-text-secondary opacity-30 mb-3\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-text-secondary text-sm font-medium\",\n            children: \"Empty canvas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-text-secondary text-xs mt-1 opacity-70\",\n            children: \"Add tools from the sidebar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 11\n      }, this), nodes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-3 right-3 z-10 bg-surface-light bg-opacity-90 backdrop-blur-sm rounded-lg px-3 py-2 text-xs text-text-secondary\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Ctrl + Drag to pan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u2022\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Scroll to zoom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), configTool && /*#__PURE__*/_jsxDEV(ToolConfigModal, {\n      tool: configTool,\n      isOpen: configModalOpen,\n      onClose: () => {\n        setConfigModalOpen(false);\n        setConfigTool(null);\n      },\n      onSave: handleSaveConfig\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 9\n    }, this), saveModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      onClick: () => setSaveModalOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-surface-light rounded-xl p-6 max-w-md w-full mx-4\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-text-primary mb-4\",\n          children: \"Save Workflow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: workflowName,\n          onChange: e => setWorkflowName(e.target.value),\n          placeholder: \"Enter workflow name...\",\n          className: \"w-full px-3 py-2 bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary mb-4\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSaveModalOpen(false),\n            className: \"px-4 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSave,\n            className: \"px-4 py-2 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 295,\n    columnNumber: 5\n  }, this);\n};\n_s(WorkflowCanvas, \"UqWDWWle2gECQo0x8lkLRij1B6E=\");\n_c = WorkflowCanvas;\nexport default WorkflowCanvas;\nvar _c;\n$RefreshReg$(_c, \"WorkflowCanvas\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ToolNode","ToolConfigModal","ToolDropdown","jsxDEV","_jsxDEV","Fragment","_Fragment","WorkflowCanvas","_s","nodes","setNodes","connections","setConnections","selectedNode","setSelectedNode","configModalOpen","setConfigModalOpen","configTool","setConfigTool","dragging","setDragging","dragOffset","setDragOffset","x","y","connectingFrom","setConnectingFrom","zoom","setZoom","pan","setPan","isPanning","setIsPanning","panStart","setPanStart","workflowName","setWorkflowName","saveModalOpen","setSaveModalOpen","canvasRef","containerRef","nodeIdCounter","availableTools","name","icon","saved","localStorage","getItem","workflows","JSON","parse","length","latest","current","e","console","error","addNode","tool","position","toolName","newId","newNode","id","config","customColor","color","handleNodeClick","node","handleSaveConfig","nodeId","prevNodes","map","handleDeleteNode","filter","prevConnections","conn","from","to","handleNodeMouseDown","stopPropagation","find","n","_containerRef$current","rect","getBoundingClientRect","clientX","left","clientY","top","handleConnectionPointClick","pointType","existingConnection","handleMouseMove","handleMouseDown","button","ctrlKey","_containerRef$current2","preventDefault","handleMouseUp","handleWheel","_containerRef$current3","mouseX","mouseY","zoomFactor","deltaY","newZoom","Math","max","min","zoomChange","window","addEventListener","removeEventListener","handleZoomIn","prev","handleZoomOut","handleResetZoom","handleSave","trim","alert","workflow","Date","now","toString","createdAt","toISOString","updatedAt","existingIndex","findIndex","w","push","setItem","stringify","handleLoad","workflowNames","selected","prompt","join","drawConnection","fromNode","toNode","fromX","fromY","toX","toY","midY","d","stroke","strokeWidth","fill","markerEnd","className","fileName","_jsxFileName","lineNumber","columnNumber","children","type","value","onChange","target","placeholder","onClick","viewBox","strokeLinecap","strokeLinejoin","title","round","tools","onAddTool","onCustomize","customTools","ref","style","cursor","onMouseDown","onWheel","width","height","markerWidth","markerHeight","refX","refY","orient","points","index","detail","c","i","transform","transformOrigin","isSelected","onConnectionPointClick","isConnectingFrom","currentTarget","closest","isOpen","onClose","onSave","autoFocus","_c","$RefreshReg$"],"sources":["/Users/mnsh/Desktop/cyber-lynx-go/frontend/src/components/workflow/WorkflowCanvas.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport ToolNode from './ToolNode';\nimport ToolConfigModal from './ToolConfigModal';\nimport ToolDropdown from './ToolDropdown';\n\nconst WorkflowCanvas = () => {\n  const [nodes, setNodes] = useState([]);\n  const [connections, setConnections] = useState([]);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [configModalOpen, setConfigModalOpen] = useState(false);\n  const [configTool, setConfigTool] = useState(null);\n  const [dragging, setDragging] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [connectingFrom, setConnectingFrom] = useState(null);\n  const [zoom, setZoom] = useState(1);\n  const [pan, setPan] = useState({ x: 0, y: 0 });\n  const [isPanning, setIsPanning] = useState(false);\n  const [panStart, setPanStart] = useState({ x: 0, y: 0 });\n  const [workflowName, setWorkflowName] = useState('');\n  const [saveModalOpen, setSaveModalOpen] = useState(false);\n  const canvasRef = useRef(null);\n  const containerRef = useRef(null);\n  const nodeIdCounter = useRef(0);\n\n  const availableTools = [\n    { name: 'Nmap', icon: 'nmap' },\n    { name: 'Subfinder', icon: 'subfinder' },\n    { name: 'Dirsearch', icon: 'dirsearch' },\n    { name: 'Ghauri', icon: 'ghauri' }\n  ];\n\n  // Load workflow from localStorage on mount\n  useEffect(() => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          // Load the most recent workflow\n          const latest = workflows[workflows.length - 1];\n          setNodes(latest.nodes || []);\n          setConnections(latest.connections || []);\n          setWorkflowName(latest.name || '');\n          if (latest.nodeIdCounter) {\n            nodeIdCounter.current = latest.nodeIdCounter;\n          }\n        }\n      } catch (e) {\n        console.error('Error loading workflow:', e);\n      }\n    }\n  }, []);\n\n  const addNode = (tool, position = null) => {\n    const toolName = typeof tool === 'string' ? tool : tool.name;\n    const newId = `node-${nodeIdCounter.current++}`;\n    const newNode = {\n      id: newId,\n      name: toolName,\n      position: position || {\n        x: 200,\n        y: 200\n      },\n      config: {},\n      customColor: typeof tool === 'object' && tool.color ? tool.color : null\n    };\n    setNodes([...nodes, newNode]);\n  };\n\n  const handleNodeClick = (node) => {\n    setSelectedNode(node.id);\n    setConfigTool(node);\n    setConfigModalOpen(true);\n  };\n\n  const handleSaveConfig = (nodeId, config) => {\n    setNodes(prevNodes =>\n      prevNodes.map(node =>\n        node.id === nodeId ? { ...node, config } : node\n      )\n    );\n  };\n\n  const handleDeleteNode = (nodeId) => {\n    setNodes(prevNodes => prevNodes.filter(node => node.id !== nodeId));\n    setConnections(prevConnections =>\n      prevConnections.filter(conn => conn.from !== nodeId && conn.to !== nodeId)\n    );\n    if (selectedNode === nodeId) {\n      setSelectedNode(null);\n    }\n  };\n\n  const handleNodeMouseDown = (nodeId, e) => {\n    e.stopPropagation();\n    const node = nodes.find(n => n.id === nodeId);\n    if (node) {\n      setDragging(nodeId);\n      const rect = containerRef.current?.getBoundingClientRect();\n      if (rect) {\n        setDragOffset({\n          x: (e.clientX - rect.left - pan.x) / zoom - node.position.x,\n          y: (e.clientY - rect.top - pan.y) / zoom - node.position.y\n        });\n      }\n    }\n  };\n\n  const handleConnectionPointClick = (nodeId, pointType, e) => {\n    e.stopPropagation();\n    if (pointType === 'output') {\n      if (connectingFrom === nodeId) {\n        setConnectingFrom(null);\n      } else {\n        setConnectingFrom(nodeId);\n      }\n    } else if (pointType === 'input' && connectingFrom && connectingFrom !== nodeId) {\n      const existingConnection = connections.find(\n        conn => conn.from === connectingFrom && conn.to === nodeId\n      );\n      if (!existingConnection) {\n        setConnections([...connections, { from: connectingFrom, to: nodeId }]);\n      }\n      setConnectingFrom(null);\n    }\n  };\n\n  const handleMouseMove = (e) => {\n    if (isPanning && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      setPan({\n        x: e.clientX - rect.left - panStart.x,\n        y: e.clientY - rect.top - panStart.y\n      });\n    } else if (dragging && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      setNodes(prevNodes =>\n        prevNodes.map(node =>\n          node.id === dragging\n            ? {\n                ...node,\n                position: {\n                  x: (e.clientX - rect.left - pan.x) / zoom - dragOffset.x,\n                  y: (e.clientY - rect.top - pan.y) / zoom - dragOffset.y\n                }\n              }\n            : node\n        )\n      );\n    }\n  };\n\n  const handleMouseDown = (e) => {\n    if (e.button === 1 || (e.button === 0 && e.ctrlKey)) {\n      e.preventDefault();\n      setIsPanning(true);\n      const rect = containerRef.current?.getBoundingClientRect();\n      if (rect) {\n        setPanStart({\n          x: e.clientX - rect.left - pan.x,\n          y: e.clientY - rect.top - pan.y\n        });\n      }\n    }\n  };\n\n  const handleMouseUp = () => {\n    setDragging(null);\n    setIsPanning(false);\n  };\n\n  const handleWheel = (e) => {\n    e.preventDefault();\n    const rect = containerRef.current?.getBoundingClientRect();\n    if (rect) {\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n      \n      const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;\n      const newZoom = Math.max(0.3, Math.min(2, zoom * zoomFactor));\n      \n      const zoomChange = newZoom / zoom;\n      setPan({\n        x: mouseX - (mouseX - pan.x) * zoomChange,\n        y: mouseY - (mouseY - pan.y) * zoomChange\n      });\n      setZoom(newZoom);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [dragging, dragOffset, isPanning, panStart, pan, zoom]);\n\n  const handleZoomIn = () => setZoom(prev => Math.min(2, prev + 0.1));\n  const handleZoomOut = () => setZoom(prev => Math.max(0.3, prev - 0.1));\n  const handleResetZoom = () => {\n    setZoom(1);\n    setPan({ x: 0, y: 0 });\n  };\n\n  const handleSave = () => {\n    if (!workflowName.trim()) {\n      alert('Please enter a workflow name');\n      return;\n    }\n    \n    const workflow = {\n      id: Date.now().toString(),\n      name: workflowName,\n      nodes,\n      connections,\n      nodeIdCounter: nodeIdCounter.current,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    let workflows = saved ? JSON.parse(saved) : [];\n    \n    // Update existing or add new\n    const existingIndex = workflows.findIndex(w => w.name === workflowName);\n    if (existingIndex >= 0) {\n      workflows[existingIndex] = { ...workflow, id: workflows[existingIndex].id };\n    } else {\n      workflows.push(workflow);\n    }\n    \n    localStorage.setItem('cyberlynx-workflows', JSON.stringify(workflows));\n    setSaveModalOpen(false);\n    alert('Workflow saved successfully!');\n  };\n\n  const handleLoad = () => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          const workflowNames = workflows.map(w => w.name);\n          const selected = prompt(`Enter workflow name to load:\\n\\nAvailable: ${workflowNames.join(', ')}`);\n          if (selected) {\n            const workflow = workflows.find(w => w.name === selected);\n            if (workflow) {\n              setNodes(workflow.nodes || []);\n              setConnections(workflow.connections || []);\n              setWorkflowName(workflow.name || '');\n              if (workflow.nodeIdCounter) {\n                nodeIdCounter.current = workflow.nodeIdCounter;\n              }\n              setZoom(1);\n              setPan({ x: 0, y: 0 });\n            } else {\n              alert('Workflow not found');\n            }\n          }\n        } else {\n          alert('No saved workflows found');\n        }\n      } catch (e) {\n        alert('Error loading workflow');\n      }\n    } else {\n      alert('No saved workflows found');\n    }\n  };\n\n  const drawConnection = (fromNode, toNode) => {\n    const fromX = (fromNode.position.x + 60) * zoom + pan.x;\n    const fromY = (fromNode.position.y + 70) * zoom + pan.y;\n    const toX = (toNode.position.x + 60) * zoom + pan.x;\n    const toY = toNode.position.y * zoom + pan.y;\n\n    const midY = (fromY + toY) / 2;\n\n    return (\n      <path\n        key={`${fromNode.id}-${toNode.id}`}\n        d={`M ${fromX} ${fromY} C ${fromX} ${midY}, ${toX} ${midY}, ${toX} ${toY}`}\n        stroke=\"rgba(255, 109, 31, 0.5)\"\n        strokeWidth={2 * zoom}\n        fill=\"none\"\n        markerEnd=\"url(#arrowhead)\"\n        className=\"cursor-pointer hover:stroke-primary transition-colors\"\n      />\n    );\n  };\n\n  return (\n    <div className=\"relative w-full h-full\">\n      {/* Top Bar - Minimalist */}\n      <div className=\"absolute top-0 left-0 right-0 z-30 bg-surface-light border-b border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <input\n            type=\"text\"\n            value={workflowName}\n            onChange={(e) => setWorkflowName(e.target.value)}\n            placeholder=\"Workflow name...\"\n            className=\"px-3 py-1.5 text-sm bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary\"\n          />\n          <button\n            onClick={() => setSaveModalOpen(true)}\n            className=\"px-3 py-1.5 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors flex items-center space-x-1.5\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\n            </svg>\n            <span>Save</span>\n          </button>\n          <button\n            onClick={handleLoad}\n            className=\"px-3 py-1.5 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors flex items-center space-x-1.5\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n            </svg>\n            <span>Load</span>\n          </button>\n        </div>\n        \n        {/* Zoom Controls */}\n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={handleZoomOut}\n            className=\"w-8 h-8 flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\"\n            title=\"Zoom Out\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7\" />\n            </svg>\n          </button>\n          <span className=\"text-xs text-text-secondary min-w-[3rem] text-center\">{Math.round(zoom * 100)}%</span>\n          <button\n            onClick={handleZoomIn}\n            className=\"w-8 h-8 flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\"\n            title=\"Zoom In\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7\" />\n            </svg>\n          </button>\n          <button\n            onClick={handleResetZoom}\n            className=\"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\"\n            title=\"Reset View\"\n          >\n            Reset\n          </button>\n        </div>\n      </div>\n\n      {/* Toolbar - Minimalist Sidebar with Dropdown */}\n      <div className=\"absolute top-14 left-0 z-20 bg-surface-light border-r border-gray-200 dark:border-gray-700 p-3\">\n        <ToolDropdown \n          tools={availableTools} \n          onAddTool={(tool, position) => addNode(tool, position)}\n          onCustomize={(customTools) => {\n            // Store custom tools if needed\n            localStorage.setItem('cyberlynx-custom-tools', JSON.stringify(customTools));\n          }}\n        />\n        {nodes.length > 0 && (\n          <>\n            <div className=\"my-3 border-t border-gray-200 dark:border-gray-700\"></div>\n            <button\n              onClick={() => {\n                setNodes([]);\n                setConnections([]);\n                setSelectedNode(null);\n                setConnectingFrom(null);\n                setWorkflowName('');\n              }}\n              className=\"w-10 h-10 flex items-center justify-center bg-danger hover:bg-red-600 text-white rounded-lg transition-colors\"\n              title=\"Clear All\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n              </svg>\n            </button>\n          </>\n        )}\n      </div>\n\n      {/* Canvas Container */}\n      <div\n        ref={containerRef}\n        data-canvas=\"true\"\n        className=\"absolute top-14 left-12 right-0 bottom-0 bg-background-primary overflow-hidden\"\n        style={{ cursor: isPanning ? 'grabbing' : 'default' }}\n        onMouseDown={handleMouseDown}\n        onWheel={handleWheel}\n        onClick={() => {\n          setSelectedNode(null);\n          setConnectingFrom(null);\n        }}\n      >\n        {/* SVG for connections */}\n        <svg className=\"absolute inset-0 pointer-events-none\" style={{ width: '100%', height: '100%' }}>\n          <defs>\n            <marker\n              id=\"arrowhead\"\n              markerWidth=\"10\"\n              markerHeight=\"10\"\n              refX=\"9\"\n              refY=\"3\"\n              orient=\"auto\"\n            >\n              <polygon\n                points=\"0 0, 10 3, 0 6\"\n                fill=\"rgba(255, 109, 31, 0.5)\"\n              />\n            </marker>\n          </defs>\n          {connections.map((conn, index) => {\n            const fromNode = nodes.find(n => n.id === conn.from);\n            const toNode = nodes.find(n => n.id === conn.to);\n            if (fromNode && toNode) {\n              return (\n                <g key={`${conn.from}-${conn.to}-${index}`}>\n                  {drawConnection(fromNode, toNode)}\n                  <path\n                    d={`M ${(fromNode.position.x + 60) * zoom + pan.x} ${(fromNode.position.y + 70) * zoom + pan.y} C ${(fromNode.position.x + 60) * zoom + pan.x} ${((fromNode.position.y + 70) * zoom + pan.y + toNode.position.y * zoom + pan.y) / 2}, ${(toNode.position.x + 60) * zoom + pan.x} ${((fromNode.position.y + 70) * zoom + pan.y + toNode.position.y * zoom + pan.y) / 2}, ${(toNode.position.x + 60) * zoom + pan.x} ${toNode.position.y * zoom + pan.y}`}\n                    stroke=\"transparent\"\n                    strokeWidth={20 * zoom}\n                    fill=\"none\"\n                    className=\"cursor-pointer pointer-events-auto\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      if (e.detail === 2) {\n                        setConnections(prev => prev.filter((c, i) => i !== index));\n                      }\n                    }}\n                  />\n                </g>\n              );\n            }\n            return null;\n          })}\n        </svg>\n\n        {/* Transform Container for Zoom/Pan */}\n        <div\n          ref={canvasRef}\n          data-transform=\"true\"\n          className=\"absolute\"\n          style={{\n            transform: `translate(${pan.x}px, ${pan.y}px) scale(${zoom})`,\n            transformOrigin: '0 0'\n          }}\n        >\n          {/* Nodes */}\n          {nodes.map((node) => (\n            <div key={node.id} className=\"relative\">\n              <ToolNode\n                tool={node}\n                position={node.position}\n                onClick={() => handleNodeClick(node)}\n                isSelected={selectedNode === node.id}\n                onConnectionPointClick={handleConnectionPointClick}\n                isConnectingFrom={connectingFrom === node.id}\n              />\n              {selectedNode === node.id && (\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDeleteNode(node.id);\n                  }}\n                  className=\"absolute -top-2 -right-2 w-5 h-5 bg-danger hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg z-20 transition-all duration-200\"\n                  style={{\n                    left: `${node.position.x + 120}px`,\n                    top: `${node.position.y}px`\n                  }}\n                >\n                  <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                  </svg>\n                </button>\n              )}\n              <div\n                className=\"absolute cursor-move\"\n                style={{\n                  left: `${node.position.x}px`,\n                  top: `${node.position.y}px`,\n                  width: '120px',\n                  height: '60px'\n                }}\n                onMouseDown={(e) => {\n                  if (e.target === e.currentTarget || !e.target.closest('[class*=\"connection\"]')) {\n                    handleNodeMouseDown(node.id, e);\n                  }\n                }}\n              ></div>\n            </div>\n          ))}\n        </div>\n\n        {/* Empty state */}\n        {nodes.length === 0 && (\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"text-center\">\n              <svg className=\"w-16 h-16 mx-auto text-text-secondary opacity-30 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n              </svg>\n              <p className=\"text-text-secondary text-sm font-medium\">Empty canvas</p>\n              <p className=\"text-text-secondary text-xs mt-1 opacity-70\">Add tools from the sidebar</p>\n            </div>\n          </div>\n        )}\n\n        {/* Minimalist Help */}\n        {nodes.length > 0 && (\n          <div className=\"absolute bottom-3 right-3 z-10 bg-surface-light bg-opacity-90 backdrop-blur-sm rounded-lg px-3 py-2 text-xs text-text-secondary\">\n            <div className=\"flex items-center space-x-4\">\n              <span>Ctrl + Drag to pan</span>\n              <span></span>\n              <span>Scroll to zoom</span>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Configuration Modal */}\n      {configTool && (\n        <ToolConfigModal\n          tool={configTool}\n          isOpen={configModalOpen}\n          onClose={() => {\n            setConfigModalOpen(false);\n            setConfigTool(null);\n          }}\n          onSave={handleSaveConfig}\n        />\n      )}\n\n      {/* Save Modal */}\n      {saveModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\" onClick={() => setSaveModalOpen(false)}>\n          <div className=\"bg-surface-light rounded-xl p-6 max-w-md w-full mx-4\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"text-lg font-semibold text-text-primary mb-4\">Save Workflow</h3>\n            <input\n              type=\"text\"\n              value={workflowName}\n              onChange={(e) => setWorkflowName(e.target.value)}\n              placeholder=\"Enter workflow name...\"\n              className=\"w-full px-3 py-2 bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary mb-4\"\n              autoFocus\n            />\n            <div className=\"flex justify-end space-x-2\">\n              <button\n                onClick={() => setSaveModalOpen(false)}\n                className=\"px-4 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSave}\n                className=\"px-4 py-2 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WorkflowCanvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}