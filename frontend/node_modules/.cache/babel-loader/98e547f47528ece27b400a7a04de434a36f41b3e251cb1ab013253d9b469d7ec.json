{"ast":null,"code":"import React from 'react';\nimport { autoPtgSizes } from './sizeUtil';\nexport function getPtg(str) {\n  return Number(str.slice(0, -1)) / 100;\n}\nfunction isPtg(itemSize) {\n  return typeof itemSize === 'string' && itemSize.endsWith('%');\n}\n/**\n * Save the size state.\n * Align the size into flex percentage base.\n */\nexport default function useSizes(items, containerSize) {\n  const propSizes = items.map(item => item.size);\n  const itemsCount = items.length;\n  const mergedContainerSize = containerSize || 0;\n  const ptg2px = ptg => ptg * mergedContainerSize;\n  // We do not need care the size state match the `items` length in `useState`.\n  // It will calculate later.\n  const [innerSizes, setInnerSizes] = React.useState(() => items.map(item => item.defaultSize));\n  const sizes = React.useMemo(() => {\n    const mergedSizes = [];\n    for (let i = 0; i < itemsCount; i += 1) {\n      mergedSizes[i] = propSizes[i] ?? innerSizes[i];\n    }\n    return mergedSizes;\n  }, [itemsCount, innerSizes, propSizes]);\n  const postPercentMinSizes = React.useMemo(() => items.map(item => {\n    if (isPtg(item.min)) {\n      return getPtg(item.min);\n    }\n    return (item.min || 0) / mergedContainerSize;\n  }), [items, mergedContainerSize]);\n  const postPercentMaxSizes = React.useMemo(() => items.map(item => {\n    if (isPtg(item.max)) {\n      return getPtg(item.max);\n    }\n    return (item.max || mergedContainerSize) / mergedContainerSize;\n  }), [items, mergedContainerSize]);\n  // Post handle the size. Will do:\n  // 1. Convert all the px into percentage if not empty.\n  // 2. Get rest percentage for exist percentage.\n  // 3. Fill the rest percentage into empty item.\n  const postPercentSizes = React.useMemo(() => {\n    const ptgList = [];\n    // Fill default percentage\n    for (let i = 0; i < itemsCount; i += 1) {\n      const itemSize = sizes[i];\n      if (isPtg(itemSize)) {\n        ptgList[i] = getPtg(itemSize);\n      } else if (itemSize || itemSize === 0) {\n        const num = Number(itemSize);\n        if (!Number.isNaN(num)) {\n          ptgList[i] = num / mergedContainerSize;\n        }\n      } else {\n        ptgList[i] = undefined;\n      }\n    }\n    // Use autoPtgSizes to handle the undefined sizes\n    return autoPtgSizes(ptgList, postPercentMinSizes, postPercentMaxSizes);\n  }, [itemsCount, sizes, mergedContainerSize, postPercentMinSizes, postPercentMaxSizes]);\n  const postPxSizes = React.useMemo(() => postPercentSizes.map(ptg2px), [postPercentSizes, mergedContainerSize]);\n  // If ssr, we will use the size from developer config first.\n  const panelSizes = React.useMemo(() => containerSize ? postPxSizes : sizes, [postPxSizes, sizes, containerSize]);\n  return [panelSizes, postPxSizes, postPercentSizes, postPercentMinSizes, postPercentMaxSizes, setInnerSizes];\n}","map":{"version":3,"names":["React","autoPtgSizes","getPtg","str","Number","slice","isPtg","itemSize","endsWith","useSizes","items","containerSize","propSizes","map","item","size","itemsCount","length","mergedContainerSize","ptg2px","ptg","innerSizes","setInnerSizes","useState","defaultSize","sizes","useMemo","mergedSizes","i","postPercentMinSizes","min","postPercentMaxSizes","max","postPercentSizes","ptgList","num","isNaN","undefined","postPxSizes","panelSizes"],"sources":["/Users/mnsh/Desktop/cyber-lynx/Cyber-LynX-php/frontend/node_modules/antd/es/splitter/hooks/useSizes.js"],"sourcesContent":["import React from 'react';\nimport { autoPtgSizes } from './sizeUtil';\nexport function getPtg(str) {\n  return Number(str.slice(0, -1)) / 100;\n}\nfunction isPtg(itemSize) {\n  return typeof itemSize === 'string' && itemSize.endsWith('%');\n}\n/**\n * Save the size state.\n * Align the size into flex percentage base.\n */\nexport default function useSizes(items, containerSize) {\n  const propSizes = items.map(item => item.size);\n  const itemsCount = items.length;\n  const mergedContainerSize = containerSize || 0;\n  const ptg2px = ptg => ptg * mergedContainerSize;\n  // We do not need care the size state match the `items` length in `useState`.\n  // It will calculate later.\n  const [innerSizes, setInnerSizes] = React.useState(() => items.map(item => item.defaultSize));\n  const sizes = React.useMemo(() => {\n    const mergedSizes = [];\n    for (let i = 0; i < itemsCount; i += 1) {\n      mergedSizes[i] = propSizes[i] ?? innerSizes[i];\n    }\n    return mergedSizes;\n  }, [itemsCount, innerSizes, propSizes]);\n  const postPercentMinSizes = React.useMemo(() => items.map(item => {\n    if (isPtg(item.min)) {\n      return getPtg(item.min);\n    }\n    return (item.min || 0) / mergedContainerSize;\n  }), [items, mergedContainerSize]);\n  const postPercentMaxSizes = React.useMemo(() => items.map(item => {\n    if (isPtg(item.max)) {\n      return getPtg(item.max);\n    }\n    return (item.max || mergedContainerSize) / mergedContainerSize;\n  }), [items, mergedContainerSize]);\n  // Post handle the size. Will do:\n  // 1. Convert all the px into percentage if not empty.\n  // 2. Get rest percentage for exist percentage.\n  // 3. Fill the rest percentage into empty item.\n  const postPercentSizes = React.useMemo(() => {\n    const ptgList = [];\n    // Fill default percentage\n    for (let i = 0; i < itemsCount; i += 1) {\n      const itemSize = sizes[i];\n      if (isPtg(itemSize)) {\n        ptgList[i] = getPtg(itemSize);\n      } else if (itemSize || itemSize === 0) {\n        const num = Number(itemSize);\n        if (!Number.isNaN(num)) {\n          ptgList[i] = num / mergedContainerSize;\n        }\n      } else {\n        ptgList[i] = undefined;\n      }\n    }\n    // Use autoPtgSizes to handle the undefined sizes\n    return autoPtgSizes(ptgList, postPercentMinSizes, postPercentMaxSizes);\n  }, [itemsCount, sizes, mergedContainerSize, postPercentMinSizes, postPercentMaxSizes]);\n  const postPxSizes = React.useMemo(() => postPercentSizes.map(ptg2px), [postPercentSizes, mergedContainerSize]);\n  // If ssr, we will use the size from developer config first.\n  const panelSizes = React.useMemo(() => containerSize ? postPxSizes : sizes, [postPxSizes, sizes, containerSize]);\n  return [panelSizes, postPxSizes, postPercentSizes, postPercentMinSizes, postPercentMaxSizes, setInnerSizes];\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}