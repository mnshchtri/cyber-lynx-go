{"ast":null,"code":"var _jsxFileName = \"/Users/mnsh/Desktop/cyber-lynx-go/frontend/src/components/workflow/WorkflowCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport ToolNode from './ToolNode';\nimport ToolConfigModal from './ToolConfigModal';\nimport ToolDropdown from './ToolDropdown';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst WorkflowCanvas = () => {\n  _s();\n  const [nodes, setNodes] = useState([]);\n  const [connections, setConnections] = useState([]);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [configModalOpen, setConfigModalOpen] = useState(false);\n  const [configTool, setConfigTool] = useState(null);\n  const [dragging, setDragging] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [connectingFrom, setConnectingFrom] = useState(null);\n  const [zoom, setZoom] = useState(1);\n  const [pan, setPan] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isPanning, setIsPanning] = useState(false);\n  const [panStart, setPanStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const [workflowName, setWorkflowName] = useState('');\n  const [saveModalOpen, setSaveModalOpen] = useState(false);\n  const canvasRef = useRef(null);\n  const containerRef = useRef(null);\n  const nodeIdCounter = useRef(0);\n  const [availableTools, setAvailableTools] = useState([{\n    name: 'Nmap',\n    icon: 'nmap'\n  }, {\n    name: 'Subfinder',\n    icon: 'subfinder'\n  }, {\n    name: 'Dirsearch',\n    icon: 'dirsearch'\n  }, {\n    name: 'Ghauri',\n    icon: 'ghauri'\n  }]);\n\n  // Load workflow from localStorage on mount\n  useEffect(() => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          // Load the most recent workflow\n          const latest = workflows[workflows.length - 1];\n          setNodes(latest.nodes || []);\n          setConnections(latest.connections || []);\n          setWorkflowName(latest.name || '');\n          if (latest.nodeIdCounter) {\n            nodeIdCounter.current = latest.nodeIdCounter;\n          }\n        }\n      } catch (e) {\n        console.error('Error loading workflow:', e);\n      }\n    }\n  }, []);\n  const addNode = (tool, position = null) => {\n    const toolName = typeof tool === 'string' ? tool : tool.name;\n    const newId = `node-${nodeIdCounter.current++}`;\n    const newNode = {\n      id: newId,\n      name: toolName,\n      position: position || {\n        x: 200,\n        y: 200\n      },\n      config: {},\n      customColor: typeof tool === 'object' && tool.color ? tool.color : null\n    };\n    setNodes([...nodes, newNode]);\n  };\n  const handleNodeClick = (node, e) => {\n    // If we're in connection mode, connect nodes instead of opening config\n    if (connectingFrom && connectingFrom !== node.id) {\n      const existingConnection = connections.find(conn => conn.from === connectingFrom && conn.to === node.id);\n      if (!existingConnection) {\n        setConnections([...connections, {\n          from: connectingFrom,\n          to: node.id\n        }]);\n      }\n      setConnectingFrom(null);\n      setSelectedNode(node.id);\n    } else if (e && e.detail === 2) {\n      // Double click to configure\n      setSelectedNode(node.id);\n      setConfigTool(node);\n      setConfigModalOpen(true);\n    } else {\n      // Single click to select and enable connection mode\n      setSelectedNode(node.id);\n      setConnectingFrom(node.id);\n    }\n  };\n  const handleSaveConfig = (nodeId, config) => {\n    setNodes(prevNodes => prevNodes.map(node => node.id === nodeId ? {\n      ...node,\n      config\n    } : node));\n  };\n  const handleDeleteNode = nodeId => {\n    setNodes(prevNodes => prevNodes.filter(node => node.id !== nodeId));\n    setConnections(prevConnections => prevConnections.filter(conn => conn.from !== nodeId && conn.to !== nodeId));\n    if (selectedNode === nodeId) {\n      setSelectedNode(null);\n    }\n  };\n  const handleNodeMouseDown = (nodeId, e) => {\n    e.stopPropagation();\n    const node = nodes.find(n => n.id === nodeId);\n    if (node) {\n      var _containerRef$current;\n      setDragging(nodeId);\n      const rect = (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.getBoundingClientRect();\n      if (rect) {\n        setDragOffset({\n          x: (e.clientX - rect.left - pan.x) / zoom - node.position.x,\n          y: (e.clientY - rect.top - pan.y) / zoom - node.position.y\n        });\n      }\n    }\n  };\n  const handleConnectionPointClick = (nodeId, pointType, e) => {\n    e.stopPropagation();\n    if (pointType === 'output') {\n      if (connectingFrom === nodeId) {\n        setConnectingFrom(null);\n      } else {\n        setConnectingFrom(nodeId);\n      }\n    } else if (pointType === 'input' && connectingFrom && connectingFrom !== nodeId) {\n      const existingConnection = connections.find(conn => conn.from === connectingFrom && conn.to === nodeId);\n      if (!existingConnection) {\n        setConnections([...connections, {\n          from: connectingFrom,\n          to: nodeId\n        }]);\n      }\n      setConnectingFrom(null);\n    }\n  };\n  const handleMouseMove = e => {\n    if (isPanning && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      setPan({\n        x: e.clientX - rect.left - panStart.x,\n        y: e.clientY - rect.top - panStart.y\n      });\n    } else if (dragging && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      setNodes(prevNodes => prevNodes.map(node => node.id === dragging ? {\n        ...node,\n        position: {\n          x: (e.clientX - rect.left - pan.x) / zoom - dragOffset.x,\n          y: (e.clientY - rect.top - pan.y) / zoom - dragOffset.y\n        }\n      } : node));\n    }\n  };\n  const handleMouseDown = e => {\n    if (e.button === 1 || e.button === 0 && e.ctrlKey) {\n      var _containerRef$current2;\n      e.preventDefault();\n      setIsPanning(true);\n      const rect = (_containerRef$current2 = containerRef.current) === null || _containerRef$current2 === void 0 ? void 0 : _containerRef$current2.getBoundingClientRect();\n      if (rect) {\n        setPanStart({\n          x: e.clientX - rect.left - pan.x,\n          y: e.clientY - rect.top - pan.y\n        });\n      }\n    }\n  };\n  const handleMouseUp = () => {\n    setDragging(null);\n    setIsPanning(false);\n  };\n  const handleWheel = e => {\n    var _containerRef$current3;\n    e.preventDefault();\n    const rect = (_containerRef$current3 = containerRef.current) === null || _containerRef$current3 === void 0 ? void 0 : _containerRef$current3.getBoundingClientRect();\n    if (rect) {\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n      const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;\n      const newZoom = Math.max(0.3, Math.min(2, zoom * zoomFactor));\n      const zoomChange = newZoom / zoom;\n      setPan({\n        x: mouseX - (mouseX - pan.x) * zoomChange,\n        y: mouseY - (mouseY - pan.y) * zoomChange\n      });\n      setZoom(newZoom);\n    }\n  };\n  useEffect(() => {\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [dragging, dragOffset, isPanning, panStart, pan, zoom]);\n  const handleZoomIn = () => setZoom(prev => Math.min(2, prev + 0.1));\n  const handleZoomOut = () => setZoom(prev => Math.max(0.3, prev - 0.1));\n  const handleResetZoom = () => {\n    setZoom(1);\n    setPan({\n      x: 0,\n      y: 0\n    });\n  };\n  const handleSave = () => {\n    if (!workflowName.trim()) {\n      alert('Please enter a workflow name');\n      return;\n    }\n    const workflow = {\n      id: Date.now().toString(),\n      name: workflowName,\n      nodes,\n      connections,\n      nodeIdCounter: nodeIdCounter.current,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    let workflows = saved ? JSON.parse(saved) : [];\n\n    // Update existing or add new\n    const existingIndex = workflows.findIndex(w => w.name === workflowName);\n    if (existingIndex >= 0) {\n      workflows[existingIndex] = {\n        ...workflow,\n        id: workflows[existingIndex].id\n      };\n    } else {\n      workflows.push(workflow);\n    }\n    localStorage.setItem('cyberlynx-workflows', JSON.stringify(workflows));\n    setSaveModalOpen(false);\n    alert('Workflow saved successfully!');\n  };\n  const handleLoad = () => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          const workflowNames = workflows.map(w => w.name);\n          const selected = prompt(`Enter workflow name to load:\\n\\nAvailable: ${workflowNames.join(', ')}`);\n          if (selected) {\n            const workflow = workflows.find(w => w.name === selected);\n            if (workflow) {\n              setNodes(workflow.nodes || []);\n              setConnections(workflow.connections || []);\n              setWorkflowName(workflow.name || '');\n              if (workflow.nodeIdCounter) {\n                nodeIdCounter.current = workflow.nodeIdCounter;\n              }\n              setZoom(1);\n              setPan({\n                x: 0,\n                y: 0\n              });\n            } else {\n              alert('Workflow not found');\n            }\n          }\n        } else {\n          alert('No saved workflows found');\n        }\n      } catch (e) {\n        alert('Error loading workflow');\n      }\n    } else {\n      alert('No saved workflows found');\n    }\n  };\n  const drawConnection = (fromNode, toNode) => {\n    const fromX = (fromNode.position.x + 60) * zoom + pan.x;\n    const fromY = (fromNode.position.y + 70) * zoom + pan.y;\n    const toX = (toNode.position.x + 60) * zoom + pan.x;\n    const toY = toNode.position.y * zoom + pan.y;\n    const midY = (fromY + toY) / 2;\n    return /*#__PURE__*/_jsxDEV(\"path\", {\n      d: `M ${fromX} ${fromY} C ${fromX} ${midY}, ${toX} ${midY}, ${toX} ${toY}`,\n      stroke: \"rgba(255, 109, 31, 0.5)\",\n      strokeWidth: 2 * zoom,\n      fill: \"none\",\n      markerEnd: \"url(#arrowhead)\",\n      className: \"cursor-pointer hover:stroke-primary transition-colors\"\n    }, `${fromNode.id}-${toNode.id}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-0 left-0 right-0 z-30 bg-surface-light border-b border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: workflowName,\n          onChange: e => setWorkflowName(e.target.value),\n          placeholder: \"Workflow name...\",\n          className: \"px-3 py-1.5 text-sm bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSaveModalOpen(true),\n          className: \"px-3 py-1.5 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors flex items-center space-x-1.5\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLoad,\n          className: \"px-3 py-1.5 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors flex items-center space-x-1.5\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Load\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleZoomOut,\n          className: \"w-8 h-8 flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\",\n          title: \"Zoom Out\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs text-text-secondary min-w-[3rem] text-center\",\n          children: [Math.round(zoom * 100), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleZoomIn,\n          className: \"w-8 h-8 flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\",\n          title: \"Zoom In\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleResetZoom,\n          className: \"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\",\n          title: \"Reset View\",\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-14 left-0 z-20 bg-surface-light border-r border-gray-200 dark:border-gray-700 p-3\",\n      children: [/*#__PURE__*/_jsxDEV(ToolDropdown, {\n        tools: availableTools,\n        onAddTool: (tool, position) => addNode(tool, position),\n        onCustomize: customTools => {\n          // Store custom tools\n          localStorage.setItem('cyberlynx-custom-tools', JSON.stringify(customTools));\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this), nodes.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-3 border-t border-gray-200 dark:border-gray-700\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setNodes([]);\n            setConnections([]);\n            setSelectedNode(null);\n            setConnectingFrom(null);\n            setWorkflowName('');\n          },\n          className: \"w-10 h-10 flex items-center justify-center bg-danger hover:bg-red-600 text-white rounded-lg transition-colors\",\n          title: \"Clear All\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      \"data-canvas\": \"true\",\n      className: \"absolute top-14 left-12 right-0 bottom-0 bg-background-primary overflow-hidden\",\n      style: {\n        cursor: isPanning ? 'grabbing' : 'default'\n      },\n      onMouseDown: handleMouseDown,\n      onWheel: handleWheel,\n      onClick: () => {\n        setSelectedNode(null);\n        setConnectingFrom(null);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"absolute inset-0 pointer-events-none\",\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n          children: /*#__PURE__*/_jsxDEV(\"marker\", {\n            id: \"arrowhead\",\n            markerWidth: \"10\",\n            markerHeight: \"10\",\n            refX: \"9\",\n            refY: \"3\",\n            orient: \"auto\",\n            children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n              points: \"0 0, 10 3, 0 6\",\n              fill: \"rgba(255, 109, 31, 0.5)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this), connections.map((conn, index) => {\n          const fromNode = nodes.find(n => n.id === conn.from);\n          const toNode = nodes.find(n => n.id === conn.to);\n          if (fromNode && toNode) {\n            return /*#__PURE__*/_jsxDEV(\"g\", {\n              children: [drawConnection(fromNode, toNode), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: `M ${(fromNode.position.x + 60) * zoom + pan.x} ${(fromNode.position.y + 70) * zoom + pan.y} C ${(fromNode.position.x + 60) * zoom + pan.x} ${((fromNode.position.y + 70) * zoom + pan.y + toNode.position.y * zoom + pan.y) / 2}, ${(toNode.position.x + 60) * zoom + pan.x} ${((fromNode.position.y + 70) * zoom + pan.y + toNode.position.y * zoom + pan.y) / 2}, ${(toNode.position.x + 60) * zoom + pan.x} ${toNode.position.y * zoom + pan.y}`,\n                stroke: \"transparent\",\n                strokeWidth: 20 * zoom,\n                fill: \"none\",\n                className: \"cursor-pointer pointer-events-auto\",\n                onClick: e => {\n                  e.stopPropagation();\n                  if (e.detail === 2) {\n                    setConnections(prev => prev.filter((c, i) => i !== index));\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 19\n              }, this)]\n            }, `${conn.from}-${conn.to}-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 17\n            }, this);\n          }\n          return null;\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: canvasRef,\n        \"data-transform\": \"true\",\n        className: \"absolute\",\n        style: {\n          transform: `translate(${pan.x}px, ${pan.y}px) scale(${zoom})`,\n          transformOrigin: '0 0'\n        },\n        children: nodes.map(node => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(ToolNode, {\n            tool: node,\n            position: node.position,\n            onClick: () => handleNodeClick(node),\n            isSelected: selectedNode === node.id,\n            onConnectionPointClick: handleConnectionPointClick,\n            isConnectingFrom: connectingFrom === node.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 15\n          }, this), selectedNode === node.id && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              handleDeleteNode(node.id);\n            },\n            className: \"absolute -top-2 -right-2 w-5 h-5 bg-danger hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg z-20 transition-all duration-200\",\n            style: {\n              left: `${node.position.x + 120}px`,\n              top: `${node.position.y}px`\n            },\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-3 h-3\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M6 18L18 6M6 6l12 12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute cursor-move\",\n            style: {\n              left: `${node.position.x}px`,\n              top: `${node.position.y}px`,\n              width: '120px',\n              height: '60px'\n            },\n            onMouseDown: e => {\n              if (e.target === e.currentTarget || !e.target.closest('[class*=\"connection\"]')) {\n                handleNodeMouseDown(node.id, e);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this)]\n        }, node.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 9\n      }, this), nodes.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-16 h-16 mx-auto text-text-secondary opacity-30 mb-3\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: \"2\",\n              d: \"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 524,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-text-secondary text-sm font-medium\",\n            children: \"Empty canvas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-text-secondary text-xs mt-1 opacity-70\",\n            children: \"Add tools from the sidebar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 11\n      }, this), nodes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-3 right-3 z-10 bg-surface-light bg-opacity-90 backdrop-blur-sm rounded-lg px-3 py-2 text-xs text-text-secondary\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Ctrl + Drag to pan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u2022\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Scroll to zoom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), configTool && /*#__PURE__*/_jsxDEV(ToolConfigModal, {\n      tool: configTool,\n      isOpen: configModalOpen,\n      onClose: () => {\n        setConfigModalOpen(false);\n        setConfigTool(null);\n      },\n      onSave: handleSaveConfig\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 9\n    }, this), saveModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      onClick: () => setSaveModalOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-surface-light rounded-xl p-6 max-w-md w-full mx-4\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-text-primary mb-4\",\n          children: \"Save Workflow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: workflowName,\n          onChange: e => setWorkflowName(e.target.value),\n          placeholder: \"Enter workflow name...\",\n          className: \"w-full px-3 py-2 bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary mb-4\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSaveModalOpen(false),\n            className: \"px-4 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSave,\n            className: \"px-4 py-2 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 5\n  }, this);\n};\n_s(WorkflowCanvas, \"wxJu4fkKCjTp3R8RHn+lci9kIys=\");\n_c = WorkflowCanvas;\nexport default WorkflowCanvas;\nvar _c;\n$RefreshReg$(_c, \"WorkflowCanvas\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ToolNode","ToolConfigModal","ToolDropdown","jsxDEV","_jsxDEV","Fragment","_Fragment","WorkflowCanvas","_s","nodes","setNodes","connections","setConnections","selectedNode","setSelectedNode","configModalOpen","setConfigModalOpen","configTool","setConfigTool","dragging","setDragging","dragOffset","setDragOffset","x","y","connectingFrom","setConnectingFrom","zoom","setZoom","pan","setPan","isPanning","setIsPanning","panStart","setPanStart","workflowName","setWorkflowName","saveModalOpen","setSaveModalOpen","canvasRef","containerRef","nodeIdCounter","availableTools","setAvailableTools","name","icon","saved","localStorage","getItem","workflows","JSON","parse","length","latest","current","e","console","error","addNode","tool","position","toolName","newId","newNode","id","config","customColor","color","handleNodeClick","node","existingConnection","find","conn","from","to","detail","handleSaveConfig","nodeId","prevNodes","map","handleDeleteNode","filter","prevConnections","handleNodeMouseDown","stopPropagation","n","_containerRef$current","rect","getBoundingClientRect","clientX","left","clientY","top","handleConnectionPointClick","pointType","handleMouseMove","handleMouseDown","button","ctrlKey","_containerRef$current2","preventDefault","handleMouseUp","handleWheel","_containerRef$current3","mouseX","mouseY","zoomFactor","deltaY","newZoom","Math","max","min","zoomChange","window","addEventListener","removeEventListener","handleZoomIn","prev","handleZoomOut","handleResetZoom","handleSave","trim","alert","workflow","Date","now","toString","createdAt","toISOString","updatedAt","existingIndex","findIndex","w","push","setItem","stringify","handleLoad","workflowNames","selected","prompt","join","drawConnection","fromNode","toNode","fromX","fromY","toX","toY","midY","d","stroke","strokeWidth","fill","markerEnd","className","fileName","_jsxFileName","lineNumber","columnNumber","children","type","value","onChange","target","placeholder","onClick","viewBox","strokeLinecap","strokeLinejoin","title","round","tools","onAddTool","onCustomize","customTools","ref","style","cursor","onMouseDown","onWheel","width","height","markerWidth","markerHeight","refX","refY","orient","points","index","c","i","transform","transformOrigin","isSelected","onConnectionPointClick","isConnectingFrom","currentTarget","closest","isOpen","onClose","onSave","autoFocus","_c","$RefreshReg$"],"sources":["/Users/mnsh/Desktop/cyber-lynx-go/frontend/src/components/workflow/WorkflowCanvas.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport ToolNode from './ToolNode';\nimport ToolConfigModal from './ToolConfigModal';\nimport ToolDropdown from './ToolDropdown';\n\nconst WorkflowCanvas = () => {\n  const [nodes, setNodes] = useState([]);\n  const [connections, setConnections] = useState([]);\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [configModalOpen, setConfigModalOpen] = useState(false);\n  const [configTool, setConfigTool] = useState(null);\n  const [dragging, setDragging] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [connectingFrom, setConnectingFrom] = useState(null);\n  const [zoom, setZoom] = useState(1);\n  const [pan, setPan] = useState({ x: 0, y: 0 });\n  const [isPanning, setIsPanning] = useState(false);\n  const [panStart, setPanStart] = useState({ x: 0, y: 0 });\n  const [workflowName, setWorkflowName] = useState('');\n  const [saveModalOpen, setSaveModalOpen] = useState(false);\n  const canvasRef = useRef(null);\n  const containerRef = useRef(null);\n  const nodeIdCounter = useRef(0);\n\n  const [availableTools, setAvailableTools] = useState([\n    { name: 'Nmap', icon: 'nmap' },\n    { name: 'Subfinder', icon: 'subfinder' },\n    { name: 'Dirsearch', icon: 'dirsearch' },\n    { name: 'Ghauri', icon: 'ghauri' }\n  ]);\n\n  // Load workflow from localStorage on mount\n  useEffect(() => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          // Load the most recent workflow\n          const latest = workflows[workflows.length - 1];\n          setNodes(latest.nodes || []);\n          setConnections(latest.connections || []);\n          setWorkflowName(latest.name || '');\n          if (latest.nodeIdCounter) {\n            nodeIdCounter.current = latest.nodeIdCounter;\n          }\n        }\n      } catch (e) {\n        console.error('Error loading workflow:', e);\n      }\n    }\n  }, []);\n\n  const addNode = (tool, position = null) => {\n    const toolName = typeof tool === 'string' ? tool : tool.name;\n    const newId = `node-${nodeIdCounter.current++}`;\n    const newNode = {\n      id: newId,\n      name: toolName,\n      position: position || {\n        x: 200,\n        y: 200\n      },\n      config: {},\n      customColor: typeof tool === 'object' && tool.color ? tool.color : null\n    };\n    setNodes([...nodes, newNode]);\n  };\n\n  const handleNodeClick = (node, e) => {\n    // If we're in connection mode, connect nodes instead of opening config\n    if (connectingFrom && connectingFrom !== node.id) {\n      const existingConnection = connections.find(\n        conn => conn.from === connectingFrom && conn.to === node.id\n      );\n      if (!existingConnection) {\n        setConnections([...connections, { from: connectingFrom, to: node.id }]);\n      }\n      setConnectingFrom(null);\n      setSelectedNode(node.id);\n    } else if (e && e.detail === 2) {\n      // Double click to configure\n      setSelectedNode(node.id);\n      setConfigTool(node);\n      setConfigModalOpen(true);\n    } else {\n      // Single click to select and enable connection mode\n      setSelectedNode(node.id);\n      setConnectingFrom(node.id);\n    }\n  };\n\n  const handleSaveConfig = (nodeId, config) => {\n    setNodes(prevNodes =>\n      prevNodes.map(node =>\n        node.id === nodeId ? { ...node, config } : node\n      )\n    );\n  };\n\n  const handleDeleteNode = (nodeId) => {\n    setNodes(prevNodes => prevNodes.filter(node => node.id !== nodeId));\n    setConnections(prevConnections =>\n      prevConnections.filter(conn => conn.from !== nodeId && conn.to !== nodeId)\n    );\n    if (selectedNode === nodeId) {\n      setSelectedNode(null);\n    }\n  };\n\n  const handleNodeMouseDown = (nodeId, e) => {\n    e.stopPropagation();\n    const node = nodes.find(n => n.id === nodeId);\n    if (node) {\n      setDragging(nodeId);\n      const rect = containerRef.current?.getBoundingClientRect();\n      if (rect) {\n        setDragOffset({\n          x: (e.clientX - rect.left - pan.x) / zoom - node.position.x,\n          y: (e.clientY - rect.top - pan.y) / zoom - node.position.y\n        });\n      }\n    }\n  };\n\n  const handleConnectionPointClick = (nodeId, pointType, e) => {\n    e.stopPropagation();\n    if (pointType === 'output') {\n      if (connectingFrom === nodeId) {\n        setConnectingFrom(null);\n      } else {\n        setConnectingFrom(nodeId);\n      }\n    } else if (pointType === 'input' && connectingFrom && connectingFrom !== nodeId) {\n      const existingConnection = connections.find(\n        conn => conn.from === connectingFrom && conn.to === nodeId\n      );\n      if (!existingConnection) {\n        setConnections([...connections, { from: connectingFrom, to: nodeId }]);\n      }\n      setConnectingFrom(null);\n    }\n  };\n\n  const handleMouseMove = (e) => {\n    if (isPanning && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      setPan({\n        x: e.clientX - rect.left - panStart.x,\n        y: e.clientY - rect.top - panStart.y\n      });\n    } else if (dragging && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      setNodes(prevNodes =>\n        prevNodes.map(node =>\n          node.id === dragging\n            ? {\n                ...node,\n                position: {\n                  x: (e.clientX - rect.left - pan.x) / zoom - dragOffset.x,\n                  y: (e.clientY - rect.top - pan.y) / zoom - dragOffset.y\n                }\n              }\n            : node\n        )\n      );\n    }\n  };\n\n  const handleMouseDown = (e) => {\n    if (e.button === 1 || (e.button === 0 && e.ctrlKey)) {\n      e.preventDefault();\n      setIsPanning(true);\n      const rect = containerRef.current?.getBoundingClientRect();\n      if (rect) {\n        setPanStart({\n          x: e.clientX - rect.left - pan.x,\n          y: e.clientY - rect.top - pan.y\n        });\n      }\n    }\n  };\n\n  const handleMouseUp = () => {\n    setDragging(null);\n    setIsPanning(false);\n  };\n\n  const handleWheel = (e) => {\n    e.preventDefault();\n    const rect = containerRef.current?.getBoundingClientRect();\n    if (rect) {\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n      \n      const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;\n      const newZoom = Math.max(0.3, Math.min(2, zoom * zoomFactor));\n      \n      const zoomChange = newZoom / zoom;\n      setPan({\n        x: mouseX - (mouseX - pan.x) * zoomChange,\n        y: mouseY - (mouseY - pan.y) * zoomChange\n      });\n      setZoom(newZoom);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [dragging, dragOffset, isPanning, panStart, pan, zoom]);\n\n  const handleZoomIn = () => setZoom(prev => Math.min(2, prev + 0.1));\n  const handleZoomOut = () => setZoom(prev => Math.max(0.3, prev - 0.1));\n  const handleResetZoom = () => {\n    setZoom(1);\n    setPan({ x: 0, y: 0 });\n  };\n\n  const handleSave = () => {\n    if (!workflowName.trim()) {\n      alert('Please enter a workflow name');\n      return;\n    }\n    \n    const workflow = {\n      id: Date.now().toString(),\n      name: workflowName,\n      nodes,\n      connections,\n      nodeIdCounter: nodeIdCounter.current,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    let workflows = saved ? JSON.parse(saved) : [];\n    \n    // Update existing or add new\n    const existingIndex = workflows.findIndex(w => w.name === workflowName);\n    if (existingIndex >= 0) {\n      workflows[existingIndex] = { ...workflow, id: workflows[existingIndex].id };\n    } else {\n      workflows.push(workflow);\n    }\n    \n    localStorage.setItem('cyberlynx-workflows', JSON.stringify(workflows));\n    setSaveModalOpen(false);\n    alert('Workflow saved successfully!');\n  };\n\n  const handleLoad = () => {\n    const saved = localStorage.getItem('cyberlynx-workflows');\n    if (saved) {\n      try {\n        const workflows = JSON.parse(saved);\n        if (workflows.length > 0) {\n          const workflowNames = workflows.map(w => w.name);\n          const selected = prompt(`Enter workflow name to load:\\n\\nAvailable: ${workflowNames.join(', ')}`);\n          if (selected) {\n            const workflow = workflows.find(w => w.name === selected);\n            if (workflow) {\n              setNodes(workflow.nodes || []);\n              setConnections(workflow.connections || []);\n              setWorkflowName(workflow.name || '');\n              if (workflow.nodeIdCounter) {\n                nodeIdCounter.current = workflow.nodeIdCounter;\n              }\n              setZoom(1);\n              setPan({ x: 0, y: 0 });\n            } else {\n              alert('Workflow not found');\n            }\n          }\n        } else {\n          alert('No saved workflows found');\n        }\n      } catch (e) {\n        alert('Error loading workflow');\n      }\n    } else {\n      alert('No saved workflows found');\n    }\n  };\n\n  const drawConnection = (fromNode, toNode) => {\n    const fromX = (fromNode.position.x + 60) * zoom + pan.x;\n    const fromY = (fromNode.position.y + 70) * zoom + pan.y;\n    const toX = (toNode.position.x + 60) * zoom + pan.x;\n    const toY = toNode.position.y * zoom + pan.y;\n\n    const midY = (fromY + toY) / 2;\n\n    return (\n      <path\n        key={`${fromNode.id}-${toNode.id}`}\n        d={`M ${fromX} ${fromY} C ${fromX} ${midY}, ${toX} ${midY}, ${toX} ${toY}`}\n        stroke=\"rgba(255, 109, 31, 0.5)\"\n        strokeWidth={2 * zoom}\n        fill=\"none\"\n        markerEnd=\"url(#arrowhead)\"\n        className=\"cursor-pointer hover:stroke-primary transition-colors\"\n      />\n    );\n  };\n\n  return (\n    <div className=\"relative w-full h-full\">\n      {/* Top Bar - Minimalist */}\n      <div className=\"absolute top-0 left-0 right-0 z-30 bg-surface-light border-b border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <input\n            type=\"text\"\n            value={workflowName}\n            onChange={(e) => setWorkflowName(e.target.value)}\n            placeholder=\"Workflow name...\"\n            className=\"px-3 py-1.5 text-sm bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary\"\n          />\n          <button\n            onClick={() => setSaveModalOpen(true)}\n            className=\"px-3 py-1.5 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors flex items-center space-x-1.5\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\n            </svg>\n            <span>Save</span>\n          </button>\n          <button\n            onClick={handleLoad}\n            className=\"px-3 py-1.5 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors flex items-center space-x-1.5\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n            </svg>\n            <span>Load</span>\n          </button>\n        </div>\n        \n        {/* Zoom Controls */}\n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={handleZoomOut}\n            className=\"w-8 h-8 flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\"\n            title=\"Zoom Out\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7\" />\n            </svg>\n          </button>\n          <span className=\"text-xs text-text-secondary min-w-[3rem] text-center\">{Math.round(zoom * 100)}%</span>\n          <button\n            onClick={handleZoomIn}\n            className=\"w-8 h-8 flex items-center justify-center bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\"\n            title=\"Zoom In\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7\" />\n            </svg>\n          </button>\n          <button\n            onClick={handleResetZoom}\n            className=\"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\"\n            title=\"Reset View\"\n          >\n            Reset\n          </button>\n        </div>\n      </div>\n\n      {/* Toolbar - Minimalist Sidebar with Dropdown */}\n      <div className=\"absolute top-14 left-0 z-20 bg-surface-light border-r border-gray-200 dark:border-gray-700 p-3\">\n        <ToolDropdown \n          tools={availableTools} \n          onAddTool={(tool, position) => addNode(tool, position)}\n          onCustomize={(customTools) => {\n            // Store custom tools\n            localStorage.setItem('cyberlynx-custom-tools', JSON.stringify(customTools));\n          }}\n        />\n        {nodes.length > 0 && (\n          <>\n            <div className=\"my-3 border-t border-gray-200 dark:border-gray-700\"></div>\n            <button\n              onClick={() => {\n                setNodes([]);\n                setConnections([]);\n                setSelectedNode(null);\n                setConnectingFrom(null);\n                setWorkflowName('');\n              }}\n              className=\"w-10 h-10 flex items-center justify-center bg-danger hover:bg-red-600 text-white rounded-lg transition-colors\"\n              title=\"Clear All\"\n            >\n              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n              </svg>\n            </button>\n          </>\n        )}\n      </div>\n\n      {/* Canvas Container */}\n      <div\n        ref={containerRef}\n        data-canvas=\"true\"\n        className=\"absolute top-14 left-12 right-0 bottom-0 bg-background-primary overflow-hidden\"\n        style={{ cursor: isPanning ? 'grabbing' : 'default' }}\n        onMouseDown={handleMouseDown}\n        onWheel={handleWheel}\n        onClick={() => {\n          setSelectedNode(null);\n          setConnectingFrom(null);\n        }}\n      >\n        {/* SVG for connections */}\n        <svg className=\"absolute inset-0 pointer-events-none\" style={{ width: '100%', height: '100%' }}>\n          <defs>\n            <marker\n              id=\"arrowhead\"\n              markerWidth=\"10\"\n              markerHeight=\"10\"\n              refX=\"9\"\n              refY=\"3\"\n              orient=\"auto\"\n            >\n              <polygon\n                points=\"0 0, 10 3, 0 6\"\n                fill=\"rgba(255, 109, 31, 0.5)\"\n              />\n            </marker>\n          </defs>\n          {connections.map((conn, index) => {\n            const fromNode = nodes.find(n => n.id === conn.from);\n            const toNode = nodes.find(n => n.id === conn.to);\n            if (fromNode && toNode) {\n              return (\n                <g key={`${conn.from}-${conn.to}-${index}`}>\n                  {drawConnection(fromNode, toNode)}\n                  <path\n                    d={`M ${(fromNode.position.x + 60) * zoom + pan.x} ${(fromNode.position.y + 70) * zoom + pan.y} C ${(fromNode.position.x + 60) * zoom + pan.x} ${((fromNode.position.y + 70) * zoom + pan.y + toNode.position.y * zoom + pan.y) / 2}, ${(toNode.position.x + 60) * zoom + pan.x} ${((fromNode.position.y + 70) * zoom + pan.y + toNode.position.y * zoom + pan.y) / 2}, ${(toNode.position.x + 60) * zoom + pan.x} ${toNode.position.y * zoom + pan.y}`}\n                    stroke=\"transparent\"\n                    strokeWidth={20 * zoom}\n                    fill=\"none\"\n                    className=\"cursor-pointer pointer-events-auto\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      if (e.detail === 2) {\n                        setConnections(prev => prev.filter((c, i) => i !== index));\n                      }\n                    }}\n                  />\n                </g>\n              );\n            }\n            return null;\n          })}\n        </svg>\n\n        {/* Transform Container for Zoom/Pan */}\n        <div\n          ref={canvasRef}\n          data-transform=\"true\"\n          className=\"absolute\"\n          style={{\n            transform: `translate(${pan.x}px, ${pan.y}px) scale(${zoom})`,\n            transformOrigin: '0 0'\n          }}\n        >\n          {/* Nodes */}\n          {nodes.map((node) => (\n            <div key={node.id} className=\"relative\">\n              <ToolNode\n                tool={node}\n                position={node.position}\n                onClick={() => handleNodeClick(node)}\n                isSelected={selectedNode === node.id}\n                onConnectionPointClick={handleConnectionPointClick}\n                isConnectingFrom={connectingFrom === node.id}\n              />\n              {selectedNode === node.id && (\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDeleteNode(node.id);\n                  }}\n                  className=\"absolute -top-2 -right-2 w-5 h-5 bg-danger hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg z-20 transition-all duration-200\"\n                  style={{\n                    left: `${node.position.x + 120}px`,\n                    top: `${node.position.y}px`\n                  }}\n                >\n                  <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                  </svg>\n                </button>\n              )}\n              <div\n                className=\"absolute cursor-move\"\n                style={{\n                  left: `${node.position.x}px`,\n                  top: `${node.position.y}px`,\n                  width: '120px',\n                  height: '60px'\n                }}\n                onMouseDown={(e) => {\n                  if (e.target === e.currentTarget || !e.target.closest('[class*=\"connection\"]')) {\n                    handleNodeMouseDown(node.id, e);\n                  }\n                }}\n              ></div>\n            </div>\n          ))}\n        </div>\n\n        {/* Empty state */}\n        {nodes.length === 0 && (\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"text-center\">\n              <svg className=\"w-16 h-16 mx-auto text-text-secondary opacity-30 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n              </svg>\n              <p className=\"text-text-secondary text-sm font-medium\">Empty canvas</p>\n              <p className=\"text-text-secondary text-xs mt-1 opacity-70\">Add tools from the sidebar</p>\n            </div>\n          </div>\n        )}\n\n        {/* Minimalist Help */}\n        {nodes.length > 0 && (\n          <div className=\"absolute bottom-3 right-3 z-10 bg-surface-light bg-opacity-90 backdrop-blur-sm rounded-lg px-3 py-2 text-xs text-text-secondary\">\n            <div className=\"flex items-center space-x-4\">\n              <span>Ctrl + Drag to pan</span>\n              <span></span>\n              <span>Scroll to zoom</span>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Configuration Modal */}\n      {configTool && (\n        <ToolConfigModal\n          tool={configTool}\n          isOpen={configModalOpen}\n          onClose={() => {\n            setConfigModalOpen(false);\n            setConfigTool(null);\n          }}\n          onSave={handleSaveConfig}\n        />\n      )}\n\n      {/* Save Modal */}\n      {saveModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\" onClick={() => setSaveModalOpen(false)}>\n          <div className=\"bg-surface-light rounded-xl p-6 max-w-md w-full mx-4\" onClick={(e) => e.stopPropagation()}>\n            <h3 className=\"text-lg font-semibold text-text-primary mb-4\">Save Workflow</h3>\n            <input\n              type=\"text\"\n              value={workflowName}\n              onChange={(e) => setWorkflowName(e.target.value)}\n              placeholder=\"Enter workflow name...\"\n              className=\"w-full px-3 py-2 bg-background-primary border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-text-primary mb-4\"\n              autoFocus\n            />\n            <div className=\"flex justify-end space-x-2\">\n              <button\n                onClick={() => setSaveModalOpen(false)}\n                className=\"px-4 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-text-primary rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSave}\n                className=\"px-4 py-2 text-sm bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WorkflowCanvas;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,eAAe,MAAM,mBAAmB;AAC/C,OAAOC,YAAY,MAAM,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE1C,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACgB,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACkB,eAAe,EAAEC,kBAAkB,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACoB,UAAU,EAAEC,aAAa,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACsB,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACwB,UAAU,EAAEC,aAAa,CAAC,GAAGzB,QAAQ,CAAC;IAAE0B,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAC5D,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAAC8B,IAAI,EAAEC,OAAO,CAAC,GAAG/B,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACgC,GAAG,EAAEC,MAAM,CAAC,GAAGjC,QAAQ,CAAC;IAAE0B,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAC9C,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGnC,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACoC,QAAQ,EAAEC,WAAW,CAAC,GAAGrC,QAAQ,CAAC;IAAE0B,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EACxD,MAAM,CAACW,YAAY,EAAEC,eAAe,CAAC,GAAGvC,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACwC,aAAa,EAAEC,gBAAgB,CAAC,GAAGzC,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM0C,SAAS,GAAGzC,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM0C,YAAY,GAAG1C,MAAM,CAAC,IAAI,CAAC;EACjC,MAAM2C,aAAa,GAAG3C,MAAM,CAAC,CAAC,CAAC;EAE/B,MAAM,CAAC4C,cAAc,EAAEC,iBAAiB,CAAC,GAAG9C,QAAQ,CAAC,CACnD;IAAE+C,IAAI,EAAE,MAAM;IAAEC,IAAI,EAAE;EAAO,CAAC,EAC9B;IAAED,IAAI,EAAE,WAAW;IAAEC,IAAI,EAAE;EAAY,CAAC,EACxC;IAAED,IAAI,EAAE,WAAW;IAAEC,IAAI,EAAE;EAAY,CAAC,EACxC;IAAED,IAAI,EAAE,QAAQ;IAAEC,IAAI,EAAE;EAAS,CAAC,CACnC,CAAC;;EAEF;EACA9C,SAAS,CAAC,MAAM;IACd,MAAM+C,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,qBAAqB,CAAC;IACzD,IAAIF,KAAK,EAAE;MACT,IAAI;QACF,MAAMG,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACL,KAAK,CAAC;QACnC,IAAIG,SAAS,CAACG,MAAM,GAAG,CAAC,EAAE;UACxB;UACA,MAAMC,MAAM,GAAGJ,SAAS,CAACA,SAAS,CAACG,MAAM,GAAG,CAAC,CAAC;UAC9C1C,QAAQ,CAAC2C,MAAM,CAAC5C,KAAK,IAAI,EAAE,CAAC;UAC5BG,cAAc,CAACyC,MAAM,CAAC1C,WAAW,IAAI,EAAE,CAAC;UACxCyB,eAAe,CAACiB,MAAM,CAACT,IAAI,IAAI,EAAE,CAAC;UAClC,IAAIS,MAAM,CAACZ,aAAa,EAAE;YACxBA,aAAa,CAACa,OAAO,GAAGD,MAAM,CAACZ,aAAa;UAC9C;QACF;MACF,CAAC,CAAC,OAAOc,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,CAAC,CAAC;MAC7C;IACF;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,OAAO,GAAGA,CAACC,IAAI,EAAEC,QAAQ,GAAG,IAAI,KAAK;IACzC,MAAMC,QAAQ,GAAG,OAAOF,IAAI,KAAK,QAAQ,GAAGA,IAAI,GAAGA,IAAI,CAACf,IAAI;IAC5D,MAAMkB,KAAK,GAAG,QAAQrB,aAAa,CAACa,OAAO,EAAE,EAAE;IAC/C,MAAMS,OAAO,GAAG;MACdC,EAAE,EAAEF,KAAK;MACTlB,IAAI,EAAEiB,QAAQ;MACdD,QAAQ,EAAEA,QAAQ,IAAI;QACpBrC,CAAC,EAAE,GAAG;QACNC,CAAC,EAAE;MACL,CAAC;MACDyC,MAAM,EAAE,CAAC,CAAC;MACVC,WAAW,EAAE,OAAOP,IAAI,KAAK,QAAQ,IAAIA,IAAI,CAACQ,KAAK,GAAGR,IAAI,CAACQ,KAAK,GAAG;IACrE,CAAC;IACDzD,QAAQ,CAAC,CAAC,GAAGD,KAAK,EAAEsD,OAAO,CAAC,CAAC;EAC/B,CAAC;EAED,MAAMK,eAAe,GAAGA,CAACC,IAAI,EAAEd,CAAC,KAAK;IACnC;IACA,IAAI9B,cAAc,IAAIA,cAAc,KAAK4C,IAAI,CAACL,EAAE,EAAE;MAChD,MAAMM,kBAAkB,GAAG3D,WAAW,CAAC4D,IAAI,CACzCC,IAAI,IAAIA,IAAI,CAACC,IAAI,KAAKhD,cAAc,IAAI+C,IAAI,CAACE,EAAE,KAAKL,IAAI,CAACL,EAC3D,CAAC;MACD,IAAI,CAACM,kBAAkB,EAAE;QACvB1D,cAAc,CAAC,CAAC,GAAGD,WAAW,EAAE;UAAE8D,IAAI,EAAEhD,cAAc;UAAEiD,EAAE,EAAEL,IAAI,CAACL;QAAG,CAAC,CAAC,CAAC;MACzE;MACAtC,iBAAiB,CAAC,IAAI,CAAC;MACvBZ,eAAe,CAACuD,IAAI,CAACL,EAAE,CAAC;IAC1B,CAAC,MAAM,IAAIT,CAAC,IAAIA,CAAC,CAACoB,MAAM,KAAK,CAAC,EAAE;MAC9B;MACA7D,eAAe,CAACuD,IAAI,CAACL,EAAE,CAAC;MACxB9C,aAAa,CAACmD,IAAI,CAAC;MACnBrD,kBAAkB,CAAC,IAAI,CAAC;IAC1B,CAAC,MAAM;MACL;MACAF,eAAe,CAACuD,IAAI,CAACL,EAAE,CAAC;MACxBtC,iBAAiB,CAAC2C,IAAI,CAACL,EAAE,CAAC;IAC5B;EACF,CAAC;EAED,MAAMY,gBAAgB,GAAGA,CAACC,MAAM,EAAEZ,MAAM,KAAK;IAC3CvD,QAAQ,CAACoE,SAAS,IAChBA,SAAS,CAACC,GAAG,CAACV,IAAI,IAChBA,IAAI,CAACL,EAAE,KAAKa,MAAM,GAAG;MAAE,GAAGR,IAAI;MAAEJ;IAAO,CAAC,GAAGI,IAC7C,CACF,CAAC;EACH,CAAC;EAED,MAAMW,gBAAgB,GAAIH,MAAM,IAAK;IACnCnE,QAAQ,CAACoE,SAAS,IAAIA,SAAS,CAACG,MAAM,CAACZ,IAAI,IAAIA,IAAI,CAACL,EAAE,KAAKa,MAAM,CAAC,CAAC;IACnEjE,cAAc,CAACsE,eAAe,IAC5BA,eAAe,CAACD,MAAM,CAACT,IAAI,IAAIA,IAAI,CAACC,IAAI,KAAKI,MAAM,IAAIL,IAAI,CAACE,EAAE,KAAKG,MAAM,CAC3E,CAAC;IACD,IAAIhE,YAAY,KAAKgE,MAAM,EAAE;MAC3B/D,eAAe,CAAC,IAAI,CAAC;IACvB;EACF,CAAC;EAED,MAAMqE,mBAAmB,GAAGA,CAACN,MAAM,EAAEtB,CAAC,KAAK;IACzCA,CAAC,CAAC6B,eAAe,CAAC,CAAC;IACnB,MAAMf,IAAI,GAAG5D,KAAK,CAAC8D,IAAI,CAACc,CAAC,IAAIA,CAAC,CAACrB,EAAE,KAAKa,MAAM,CAAC;IAC7C,IAAIR,IAAI,EAAE;MAAA,IAAAiB,qBAAA;MACRlE,WAAW,CAACyD,MAAM,CAAC;MACnB,MAAMU,IAAI,IAAAD,qBAAA,GAAG9C,YAAY,CAACc,OAAO,cAAAgC,qBAAA,uBAApBA,qBAAA,CAAsBE,qBAAqB,CAAC,CAAC;MAC1D,IAAID,IAAI,EAAE;QACRjE,aAAa,CAAC;UACZC,CAAC,EAAE,CAACgC,CAAC,CAACkC,OAAO,GAAGF,IAAI,CAACG,IAAI,GAAG7D,GAAG,CAACN,CAAC,IAAII,IAAI,GAAG0C,IAAI,CAACT,QAAQ,CAACrC,CAAC;UAC3DC,CAAC,EAAE,CAAC+B,CAAC,CAACoC,OAAO,GAAGJ,IAAI,CAACK,GAAG,GAAG/D,GAAG,CAACL,CAAC,IAAIG,IAAI,GAAG0C,IAAI,CAACT,QAAQ,CAACpC;QAC3D,CAAC,CAAC;MACJ;IACF;EACF,CAAC;EAED,MAAMqE,0BAA0B,GAAGA,CAAChB,MAAM,EAAEiB,SAAS,EAAEvC,CAAC,KAAK;IAC3DA,CAAC,CAAC6B,eAAe,CAAC,CAAC;IACnB,IAAIU,SAAS,KAAK,QAAQ,EAAE;MAC1B,IAAIrE,cAAc,KAAKoD,MAAM,EAAE;QAC7BnD,iBAAiB,CAAC,IAAI,CAAC;MACzB,CAAC,MAAM;QACLA,iBAAiB,CAACmD,MAAM,CAAC;MAC3B;IACF,CAAC,MAAM,IAAIiB,SAAS,KAAK,OAAO,IAAIrE,cAAc,IAAIA,cAAc,KAAKoD,MAAM,EAAE;MAC/E,MAAMP,kBAAkB,GAAG3D,WAAW,CAAC4D,IAAI,CACzCC,IAAI,IAAIA,IAAI,CAACC,IAAI,KAAKhD,cAAc,IAAI+C,IAAI,CAACE,EAAE,KAAKG,MACtD,CAAC;MACD,IAAI,CAACP,kBAAkB,EAAE;QACvB1D,cAAc,CAAC,CAAC,GAAGD,WAAW,EAAE;UAAE8D,IAAI,EAAEhD,cAAc;UAAEiD,EAAE,EAAEG;QAAO,CAAC,CAAC,CAAC;MACxE;MACAnD,iBAAiB,CAAC,IAAI,CAAC;IACzB;EACF,CAAC;EAED,MAAMqE,eAAe,GAAIxC,CAAC,IAAK;IAC7B,IAAIxB,SAAS,IAAIS,YAAY,CAACc,OAAO,EAAE;MACrC,MAAMiC,IAAI,GAAG/C,YAAY,CAACc,OAAO,CAACkC,qBAAqB,CAAC,CAAC;MACzD1D,MAAM,CAAC;QACLP,CAAC,EAAEgC,CAAC,CAACkC,OAAO,GAAGF,IAAI,CAACG,IAAI,GAAGzD,QAAQ,CAACV,CAAC;QACrCC,CAAC,EAAE+B,CAAC,CAACoC,OAAO,GAAGJ,IAAI,CAACK,GAAG,GAAG3D,QAAQ,CAACT;MACrC,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIL,QAAQ,IAAIqB,YAAY,CAACc,OAAO,EAAE;MAC3C,MAAMiC,IAAI,GAAG/C,YAAY,CAACc,OAAO,CAACkC,qBAAqB,CAAC,CAAC;MACzD9E,QAAQ,CAACoE,SAAS,IAChBA,SAAS,CAACC,GAAG,CAACV,IAAI,IAChBA,IAAI,CAACL,EAAE,KAAK7C,QAAQ,GAChB;QACE,GAAGkD,IAAI;QACPT,QAAQ,EAAE;UACRrC,CAAC,EAAE,CAACgC,CAAC,CAACkC,OAAO,GAAGF,IAAI,CAACG,IAAI,GAAG7D,GAAG,CAACN,CAAC,IAAII,IAAI,GAAGN,UAAU,CAACE,CAAC;UACxDC,CAAC,EAAE,CAAC+B,CAAC,CAACoC,OAAO,GAAGJ,IAAI,CAACK,GAAG,GAAG/D,GAAG,CAACL,CAAC,IAAIG,IAAI,GAAGN,UAAU,CAACG;QACxD;MACF,CAAC,GACD6C,IACN,CACF,CAAC;IACH;EACF,CAAC;EAED,MAAM2B,eAAe,GAAIzC,CAAC,IAAK;IAC7B,IAAIA,CAAC,CAAC0C,MAAM,KAAK,CAAC,IAAK1C,CAAC,CAAC0C,MAAM,KAAK,CAAC,IAAI1C,CAAC,CAAC2C,OAAQ,EAAE;MAAA,IAAAC,sBAAA;MACnD5C,CAAC,CAAC6C,cAAc,CAAC,CAAC;MAClBpE,YAAY,CAAC,IAAI,CAAC;MAClB,MAAMuD,IAAI,IAAAY,sBAAA,GAAG3D,YAAY,CAACc,OAAO,cAAA6C,sBAAA,uBAApBA,sBAAA,CAAsBX,qBAAqB,CAAC,CAAC;MAC1D,IAAID,IAAI,EAAE;QACRrD,WAAW,CAAC;UACVX,CAAC,EAAEgC,CAAC,CAACkC,OAAO,GAAGF,IAAI,CAACG,IAAI,GAAG7D,GAAG,CAACN,CAAC;UAChCC,CAAC,EAAE+B,CAAC,CAACoC,OAAO,GAAGJ,IAAI,CAACK,GAAG,GAAG/D,GAAG,CAACL;QAChC,CAAC,CAAC;MACJ;IACF;EACF,CAAC;EAED,MAAM6E,aAAa,GAAGA,CAAA,KAAM;IAC1BjF,WAAW,CAAC,IAAI,CAAC;IACjBY,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC;EAED,MAAMsE,WAAW,GAAI/C,CAAC,IAAK;IAAA,IAAAgD,sBAAA;IACzBhD,CAAC,CAAC6C,cAAc,CAAC,CAAC;IAClB,MAAMb,IAAI,IAAAgB,sBAAA,GAAG/D,YAAY,CAACc,OAAO,cAAAiD,sBAAA,uBAApBA,sBAAA,CAAsBf,qBAAqB,CAAC,CAAC;IAC1D,IAAID,IAAI,EAAE;MACR,MAAMiB,MAAM,GAAGjD,CAAC,CAACkC,OAAO,GAAGF,IAAI,CAACG,IAAI;MACpC,MAAMe,MAAM,GAAGlD,CAAC,CAACoC,OAAO,GAAGJ,IAAI,CAACK,GAAG;MAEnC,MAAMc,UAAU,GAAGnD,CAAC,CAACoD,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG;MAC3C,MAAMC,OAAO,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAG,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEpF,IAAI,GAAG+E,UAAU,CAAC,CAAC;MAE7D,MAAMM,UAAU,GAAGJ,OAAO,GAAGjF,IAAI;MACjCG,MAAM,CAAC;QACLP,CAAC,EAAEiF,MAAM,GAAG,CAACA,MAAM,GAAG3E,GAAG,CAACN,CAAC,IAAIyF,UAAU;QACzCxF,CAAC,EAAEiF,MAAM,GAAG,CAACA,MAAM,GAAG5E,GAAG,CAACL,CAAC,IAAIwF;MACjC,CAAC,CAAC;MACFpF,OAAO,CAACgF,OAAO,CAAC;IAClB;EACF,CAAC;EAED7G,SAAS,CAAC,MAAM;IACdkH,MAAM,CAACC,gBAAgB,CAAC,WAAW,EAAEnB,eAAe,CAAC;IACrDkB,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEb,aAAa,CAAC;IACjD,OAAO,MAAM;MACXY,MAAM,CAACE,mBAAmB,CAAC,WAAW,EAAEpB,eAAe,CAAC;MACxDkB,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEd,aAAa,CAAC;IACtD,CAAC;EACH,CAAC,EAAE,CAAClF,QAAQ,EAAEE,UAAU,EAAEU,SAAS,EAAEE,QAAQ,EAAEJ,GAAG,EAAEF,IAAI,CAAC,CAAC;EAE1D,MAAMyF,YAAY,GAAGA,CAAA,KAAMxF,OAAO,CAACyF,IAAI,IAAIR,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEM,IAAI,GAAG,GAAG,CAAC,CAAC;EACnE,MAAMC,aAAa,GAAGA,CAAA,KAAM1F,OAAO,CAACyF,IAAI,IAAIR,IAAI,CAACC,GAAG,CAAC,GAAG,EAAEO,IAAI,GAAG,GAAG,CAAC,CAAC;EACtE,MAAME,eAAe,GAAGA,CAAA,KAAM;IAC5B3F,OAAO,CAAC,CAAC,CAAC;IACVE,MAAM,CAAC;MAAEP,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC,CAAC;EACxB,CAAC;EAED,MAAMgG,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAI,CAACrF,YAAY,CAACsF,IAAI,CAAC,CAAC,EAAE;MACxBC,KAAK,CAAC,8BAA8B,CAAC;MACrC;IACF;IAEA,MAAMC,QAAQ,GAAG;MACf3D,EAAE,EAAE4D,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;MACzBlF,IAAI,EAAET,YAAY;MAClB1B,KAAK;MACLE,WAAW;MACX8B,aAAa,EAAEA,aAAa,CAACa,OAAO;MACpCyE,SAAS,EAAE,IAAIH,IAAI,CAAC,CAAC,CAACI,WAAW,CAAC,CAAC;MACnCC,SAAS,EAAE,IAAIL,IAAI,CAAC,CAAC,CAACI,WAAW,CAAC;IACpC,CAAC;IAED,MAAMlF,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,qBAAqB,CAAC;IACzD,IAAIC,SAAS,GAAGH,KAAK,GAAGI,IAAI,CAACC,KAAK,CAACL,KAAK,CAAC,GAAG,EAAE;;IAE9C;IACA,MAAMoF,aAAa,GAAGjF,SAAS,CAACkF,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACxF,IAAI,KAAKT,YAAY,CAAC;IACvE,IAAI+F,aAAa,IAAI,CAAC,EAAE;MACtBjF,SAAS,CAACiF,aAAa,CAAC,GAAG;QAAE,GAAGP,QAAQ;QAAE3D,EAAE,EAAEf,SAAS,CAACiF,aAAa,CAAC,CAAClE;MAAG,CAAC;IAC7E,CAAC,MAAM;MACLf,SAAS,CAACoF,IAAI,CAACV,QAAQ,CAAC;IAC1B;IAEA5E,YAAY,CAACuF,OAAO,CAAC,qBAAqB,EAAEpF,IAAI,CAACqF,SAAS,CAACtF,SAAS,CAAC,CAAC;IACtEX,gBAAgB,CAAC,KAAK,CAAC;IACvBoF,KAAK,CAAC,8BAA8B,CAAC;EACvC,CAAC;EAED,MAAMc,UAAU,GAAGA,CAAA,KAAM;IACvB,MAAM1F,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,qBAAqB,CAAC;IACzD,IAAIF,KAAK,EAAE;MACT,IAAI;QACF,MAAMG,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACL,KAAK,CAAC;QACnC,IAAIG,SAAS,CAACG,MAAM,GAAG,CAAC,EAAE;UACxB,MAAMqF,aAAa,GAAGxF,SAAS,CAAC8B,GAAG,CAACqD,CAAC,IAAIA,CAAC,CAACxF,IAAI,CAAC;UAChD,MAAM8F,QAAQ,GAAGC,MAAM,CAAC,8CAA8CF,aAAa,CAACG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;UACjG,IAAIF,QAAQ,EAAE;YACZ,MAAMf,QAAQ,GAAG1E,SAAS,CAACsB,IAAI,CAAC6D,CAAC,IAAIA,CAAC,CAACxF,IAAI,KAAK8F,QAAQ,CAAC;YACzD,IAAIf,QAAQ,EAAE;cACZjH,QAAQ,CAACiH,QAAQ,CAAClH,KAAK,IAAI,EAAE,CAAC;cAC9BG,cAAc,CAAC+G,QAAQ,CAAChH,WAAW,IAAI,EAAE,CAAC;cAC1CyB,eAAe,CAACuF,QAAQ,CAAC/E,IAAI,IAAI,EAAE,CAAC;cACpC,IAAI+E,QAAQ,CAAClF,aAAa,EAAE;gBAC1BA,aAAa,CAACa,OAAO,GAAGqE,QAAQ,CAAClF,aAAa;cAChD;cACAb,OAAO,CAAC,CAAC,CAAC;cACVE,MAAM,CAAC;gBAAEP,CAAC,EAAE,CAAC;gBAAEC,CAAC,EAAE;cAAE,CAAC,CAAC;YACxB,CAAC,MAAM;cACLkG,KAAK,CAAC,oBAAoB,CAAC;YAC7B;UACF;QACF,CAAC,MAAM;UACLA,KAAK,CAAC,0BAA0B,CAAC;QACnC;MACF,CAAC,CAAC,OAAOnE,CAAC,EAAE;QACVmE,KAAK,CAAC,wBAAwB,CAAC;MACjC;IACF,CAAC,MAAM;MACLA,KAAK,CAAC,0BAA0B,CAAC;IACnC;EACF,CAAC;EAED,MAAMmB,cAAc,GAAGA,CAACC,QAAQ,EAAEC,MAAM,KAAK;IAC3C,MAAMC,KAAK,GAAG,CAACF,QAAQ,CAAClF,QAAQ,CAACrC,CAAC,GAAG,EAAE,IAAII,IAAI,GAAGE,GAAG,CAACN,CAAC;IACvD,MAAM0H,KAAK,GAAG,CAACH,QAAQ,CAAClF,QAAQ,CAACpC,CAAC,GAAG,EAAE,IAAIG,IAAI,GAAGE,GAAG,CAACL,CAAC;IACvD,MAAM0H,GAAG,GAAG,CAACH,MAAM,CAACnF,QAAQ,CAACrC,CAAC,GAAG,EAAE,IAAII,IAAI,GAAGE,GAAG,CAACN,CAAC;IACnD,MAAM4H,GAAG,GAAGJ,MAAM,CAACnF,QAAQ,CAACpC,CAAC,GAAGG,IAAI,GAAGE,GAAG,CAACL,CAAC;IAE5C,MAAM4H,IAAI,GAAG,CAACH,KAAK,GAAGE,GAAG,IAAI,CAAC;IAE9B,oBACE/I,OAAA;MAEEiJ,CAAC,EAAE,KAAKL,KAAK,IAAIC,KAAK,MAAMD,KAAK,IAAII,IAAI,KAAKF,GAAG,IAAIE,IAAI,KAAKF,GAAG,IAAIC,GAAG,EAAG;MAC3EG,MAAM,EAAC,yBAAyB;MAChCC,WAAW,EAAE,CAAC,GAAG5H,IAAK;MACtB6H,IAAI,EAAC,MAAM;MACXC,SAAS,EAAC,iBAAiB;MAC3BC,SAAS,EAAC;IAAuD,GAN5D,GAAGZ,QAAQ,CAAC9E,EAAE,IAAI+E,MAAM,CAAC/E,EAAE,EAAE;MAAA2F,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAOnC,CAAC;EAEN,CAAC;EAED,oBACE1J,OAAA;IAAKsJ,SAAS,EAAC,wBAAwB;IAAAK,QAAA,gBAErC3J,OAAA;MAAKsJ,SAAS,EAAC,+IAA+I;MAAAK,QAAA,gBAC5J3J,OAAA;QAAKsJ,SAAS,EAAC,6BAA6B;QAAAK,QAAA,gBAC1C3J,OAAA;UACE4J,IAAI,EAAC,MAAM;UACXC,KAAK,EAAE9H,YAAa;UACpB+H,QAAQ,EAAG3G,CAAC,IAAKnB,eAAe,CAACmB,CAAC,CAAC4G,MAAM,CAACF,KAAK,CAAE;UACjDG,WAAW,EAAC,kBAAkB;UAC9BV,SAAS,EAAC;QAAuK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClL,CAAC,eACF1J,OAAA;UACEiK,OAAO,EAAEA,CAAA,KAAM/H,gBAAgB,CAAC,IAAI,CAAE;UACtCoH,SAAS,EAAC,4HAA4H;UAAAK,QAAA,gBAEtI3J,OAAA;YAAKsJ,SAAS,EAAC,SAAS;YAACF,IAAI,EAAC,MAAM;YAACF,MAAM,EAAC,cAAc;YAACgB,OAAO,EAAC,WAAW;YAAAP,QAAA,eAC5E3J,OAAA;cAAMmK,aAAa,EAAC,OAAO;cAACC,cAAc,EAAC,OAAO;cAACjB,WAAW,EAAC,GAAG;cAACF,CAAC,EAAC;YAA6F;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClK,CAAC,eACN1J,OAAA;YAAA2J,QAAA,EAAM;UAAI;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC,eACT1J,OAAA;UACEiK,OAAO,EAAE7B,UAAW;UACpBkB,SAAS,EAAC,wKAAwK;UAAAK,QAAA,gBAElL3J,OAAA;YAAKsJ,SAAS,EAAC,SAAS;YAACF,IAAI,EAAC,MAAM;YAACF,MAAM,EAAC,cAAc;YAACgB,OAAO,EAAC,WAAW;YAAAP,QAAA,eAC5E3J,OAAA;cAAMmK,aAAa,EAAC,OAAO;cAACC,cAAc,EAAC,OAAO;cAACjB,WAAW,EAAC,GAAG;cAACF,CAAC,EAAC;YAAgE;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrI,CAAC,eACN1J,OAAA;YAAA2J,QAAA,EAAM;UAAI;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAGN1J,OAAA;QAAKsJ,SAAS,EAAC,6BAA6B;QAAAK,QAAA,gBAC1C3J,OAAA;UACEiK,OAAO,EAAE/C,aAAc;UACvBoC,SAAS,EAAC,+JAA+J;UACzKe,KAAK,EAAC,UAAU;UAAAV,QAAA,eAEhB3J,OAAA;YAAKsJ,SAAS,EAAC,SAAS;YAACF,IAAI,EAAC,MAAM;YAACF,MAAM,EAAC,cAAc;YAACgB,OAAO,EAAC,WAAW;YAAAP,QAAA,eAC5E3J,OAAA;cAAMmK,aAAa,EAAC,OAAO;cAACC,cAAc,EAAC,OAAO;cAACjB,WAAW,EAAC,GAAG;cAACF,CAAC,EAAC;YAAqD;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1H;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACT1J,OAAA;UAAMsJ,SAAS,EAAC,sDAAsD;UAAAK,QAAA,GAAElD,IAAI,CAAC6D,KAAK,CAAC/I,IAAI,GAAG,GAAG,CAAC,EAAC,GAAC;QAAA;UAAAgI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACvG1J,OAAA;UACEiK,OAAO,EAAEjD,YAAa;UACtBsC,SAAS,EAAC,+JAA+J;UACzKe,KAAK,EAAC,SAAS;UAAAV,QAAA,eAEf3J,OAAA;YAAKsJ,SAAS,EAAC,SAAS;YAACF,IAAI,EAAC,MAAM;YAACF,MAAM,EAAC,cAAc;YAACgB,OAAO,EAAC,WAAW;YAAAP,QAAA,eAC5E3J,OAAA;cAAMmK,aAAa,EAAC,OAAO;cAACC,cAAc,EAAC,OAAO;cAACjB,WAAW,EAAC,GAAG;cAACF,CAAC,EAAC;YAA0D;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/H;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACT1J,OAAA;UACEiK,OAAO,EAAE9C,eAAgB;UACzBmC,SAAS,EAAC,wIAAwI;UAClJe,KAAK,EAAC,YAAY;UAAAV,QAAA,EACnB;QAED;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGN1J,OAAA;MAAKsJ,SAAS,EAAC,gGAAgG;MAAAK,QAAA,gBAC7G3J,OAAA,CAACF,YAAY;QACXyK,KAAK,EAAEjI,cAAe;QACtBkI,SAAS,EAAEA,CAACjH,IAAI,EAAEC,QAAQ,KAAKF,OAAO,CAACC,IAAI,EAAEC,QAAQ,CAAE;QACvDiH,WAAW,EAAGC,WAAW,IAAK;UAC5B;UACA/H,YAAY,CAACuF,OAAO,CAAC,wBAAwB,EAAEpF,IAAI,CAACqF,SAAS,CAACuC,WAAW,CAAC,CAAC;QAC7E;MAAE;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EACDrJ,KAAK,CAAC2C,MAAM,GAAG,CAAC,iBACfhD,OAAA,CAAAE,SAAA;QAAAyJ,QAAA,gBACE3J,OAAA;UAAKsJ,SAAS,EAAC;QAAoD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC1E1J,OAAA;UACEiK,OAAO,EAAEA,CAAA,KAAM;YACb3J,QAAQ,CAAC,EAAE,CAAC;YACZE,cAAc,CAAC,EAAE,CAAC;YAClBE,eAAe,CAAC,IAAI,CAAC;YACrBY,iBAAiB,CAAC,IAAI,CAAC;YACvBU,eAAe,CAAC,EAAE,CAAC;UACrB,CAAE;UACFsH,SAAS,EAAC,+GAA+G;UACzHe,KAAK,EAAC,WAAW;UAAAV,QAAA,eAEjB3J,OAAA;YAAKsJ,SAAS,EAAC,SAAS;YAACF,IAAI,EAAC,MAAM;YAACF,MAAM,EAAC,cAAc;YAACgB,OAAO,EAAC,WAAW;YAAAP,QAAA,eAC5E3J,OAAA;cAAMmK,aAAa,EAAC,OAAO;cAACC,cAAc,EAAC,OAAO;cAACjB,WAAW,EAAC,GAAG;cAACF,CAAC,EAAC;YAA8H;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA,eACT,CACH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAGN1J,OAAA;MACE2K,GAAG,EAAEvI,YAAa;MAClB,eAAY,MAAM;MAClBkH,SAAS,EAAC,gFAAgF;MAC1FsB,KAAK,EAAE;QAAEC,MAAM,EAAElJ,SAAS,GAAG,UAAU,GAAG;MAAU,CAAE;MACtDmJ,WAAW,EAAElF,eAAgB;MAC7BmF,OAAO,EAAE7E,WAAY;MACrB+D,OAAO,EAAEA,CAAA,KAAM;QACbvJ,eAAe,CAAC,IAAI,CAAC;QACrBY,iBAAiB,CAAC,IAAI,CAAC;MACzB,CAAE;MAAAqI,QAAA,gBAGF3J,OAAA;QAAKsJ,SAAS,EAAC,sCAAsC;QAACsB,KAAK,EAAE;UAAEI,KAAK,EAAE,MAAM;UAAEC,MAAM,EAAE;QAAO,CAAE;QAAAtB,QAAA,gBAC7F3J,OAAA;UAAA2J,QAAA,eACE3J,OAAA;YACE4D,EAAE,EAAC,WAAW;YACdsH,WAAW,EAAC,IAAI;YAChBC,YAAY,EAAC,IAAI;YACjBC,IAAI,EAAC,GAAG;YACRC,IAAI,EAAC,GAAG;YACRC,MAAM,EAAC,MAAM;YAAA3B,QAAA,eAEb3J,OAAA;cACEuL,MAAM,EAAC,gBAAgB;cACvBnC,IAAI,EAAC;YAAyB;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/B;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,EACNnJ,WAAW,CAACoE,GAAG,CAAC,CAACP,IAAI,EAAEoH,KAAK,KAAK;UAChC,MAAM9C,QAAQ,GAAGrI,KAAK,CAAC8D,IAAI,CAACc,CAAC,IAAIA,CAAC,CAACrB,EAAE,KAAKQ,IAAI,CAACC,IAAI,CAAC;UACpD,MAAMsE,MAAM,GAAGtI,KAAK,CAAC8D,IAAI,CAACc,CAAC,IAAIA,CAAC,CAACrB,EAAE,KAAKQ,IAAI,CAACE,EAAE,CAAC;UAChD,IAAIoE,QAAQ,IAAIC,MAAM,EAAE;YACtB,oBACE3I,OAAA;cAAA2J,QAAA,GACGlB,cAAc,CAACC,QAAQ,EAAEC,MAAM,CAAC,eACjC3I,OAAA;gBACEiJ,CAAC,EAAE,KAAK,CAACP,QAAQ,CAAClF,QAAQ,CAACrC,CAAC,GAAG,EAAE,IAAII,IAAI,GAAGE,GAAG,CAACN,CAAC,IAAI,CAACuH,QAAQ,CAAClF,QAAQ,CAACpC,CAAC,GAAG,EAAE,IAAIG,IAAI,GAAGE,GAAG,CAACL,CAAC,MAAM,CAACsH,QAAQ,CAAClF,QAAQ,CAACrC,CAAC,GAAG,EAAE,IAAII,IAAI,GAAGE,GAAG,CAACN,CAAC,IAAI,CAAC,CAACuH,QAAQ,CAAClF,QAAQ,CAACpC,CAAC,GAAG,EAAE,IAAIG,IAAI,GAAGE,GAAG,CAACL,CAAC,GAAGuH,MAAM,CAACnF,QAAQ,CAACpC,CAAC,GAAGG,IAAI,GAAGE,GAAG,CAACL,CAAC,IAAI,CAAC,KAAK,CAACuH,MAAM,CAACnF,QAAQ,CAACrC,CAAC,GAAG,EAAE,IAAII,IAAI,GAAGE,GAAG,CAACN,CAAC,IAAI,CAAC,CAACuH,QAAQ,CAAClF,QAAQ,CAACpC,CAAC,GAAG,EAAE,IAAIG,IAAI,GAAGE,GAAG,CAACL,CAAC,GAAGuH,MAAM,CAACnF,QAAQ,CAACpC,CAAC,GAAGG,IAAI,GAAGE,GAAG,CAACL,CAAC,IAAI,CAAC,KAAK,CAACuH,MAAM,CAACnF,QAAQ,CAACrC,CAAC,GAAG,EAAE,IAAII,IAAI,GAAGE,GAAG,CAACN,CAAC,IAAIwH,MAAM,CAACnF,QAAQ,CAACpC,CAAC,GAAGG,IAAI,GAAGE,GAAG,CAACL,CAAC,EAAG;gBACxb8H,MAAM,EAAC,aAAa;gBACpBC,WAAW,EAAE,EAAE,GAAG5H,IAAK;gBACvB6H,IAAI,EAAC,MAAM;gBACXE,SAAS,EAAC,oCAAoC;gBAC9CW,OAAO,EAAG9G,CAAC,IAAK;kBACdA,CAAC,CAAC6B,eAAe,CAAC,CAAC;kBACnB,IAAI7B,CAAC,CAACoB,MAAM,KAAK,CAAC,EAAE;oBAClB/D,cAAc,CAACyG,IAAI,IAAIA,IAAI,CAACpC,MAAM,CAAC,CAAC4G,CAAC,EAAEC,CAAC,KAAKA,CAAC,KAAKF,KAAK,CAAC,CAAC;kBAC5D;gBACF;cAAE;gBAAAjC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA,GAdI,GAAGtF,IAAI,CAACC,IAAI,IAAID,IAAI,CAACE,EAAE,IAAIkH,KAAK,EAAE;cAAAjC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAevC,CAAC;UAER;UACA,OAAO,IAAI;QACb,CAAC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAGN1J,OAAA;QACE2K,GAAG,EAAExI,SAAU;QACf,kBAAe,MAAM;QACrBmH,SAAS,EAAC,UAAU;QACpBsB,KAAK,EAAE;UACLe,SAAS,EAAE,aAAalK,GAAG,CAACN,CAAC,OAAOM,GAAG,CAACL,CAAC,aAAaG,IAAI,GAAG;UAC7DqK,eAAe,EAAE;QACnB,CAAE;QAAAjC,QAAA,EAGDtJ,KAAK,CAACsE,GAAG,CAAEV,IAAI,iBACdjE,OAAA;UAAmBsJ,SAAS,EAAC,UAAU;UAAAK,QAAA,gBACrC3J,OAAA,CAACJ,QAAQ;YACP2D,IAAI,EAAEU,IAAK;YACXT,QAAQ,EAAES,IAAI,CAACT,QAAS;YACxByG,OAAO,EAAEA,CAAA,KAAMjG,eAAe,CAACC,IAAI,CAAE;YACrC4H,UAAU,EAAEpL,YAAY,KAAKwD,IAAI,CAACL,EAAG;YACrCkI,sBAAsB,EAAErG,0BAA2B;YACnDsG,gBAAgB,EAAE1K,cAAc,KAAK4C,IAAI,CAACL;UAAG;YAAA2F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9C,CAAC,EACDjJ,YAAY,KAAKwD,IAAI,CAACL,EAAE,iBACvB5D,OAAA;YACEiK,OAAO,EAAG9G,CAAC,IAAK;cACdA,CAAC,CAAC6B,eAAe,CAAC,CAAC;cACnBJ,gBAAgB,CAACX,IAAI,CAACL,EAAE,CAAC;YAC3B,CAAE;YACF0F,SAAS,EAAC,iKAAiK;YAC3KsB,KAAK,EAAE;cACLtF,IAAI,EAAE,GAAGrB,IAAI,CAACT,QAAQ,CAACrC,CAAC,GAAG,GAAG,IAAI;cAClCqE,GAAG,EAAE,GAAGvB,IAAI,CAACT,QAAQ,CAACpC,CAAC;YACzB,CAAE;YAAAuI,QAAA,eAEF3J,OAAA;cAAKsJ,SAAS,EAAC,SAAS;cAACF,IAAI,EAAC,MAAM;cAACF,MAAM,EAAC,cAAc;cAACgB,OAAO,EAAC,WAAW;cAAAP,QAAA,eAC5E3J,OAAA;gBAAMmK,aAAa,EAAC,OAAO;gBAACC,cAAc,EAAC,OAAO;gBAACjB,WAAW,EAAC,GAAG;gBAACF,CAAC,EAAC;cAAsB;gBAAAM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChG;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACT,eACD1J,OAAA;YACEsJ,SAAS,EAAC,sBAAsB;YAChCsB,KAAK,EAAE;cACLtF,IAAI,EAAE,GAAGrB,IAAI,CAACT,QAAQ,CAACrC,CAAC,IAAI;cAC5BqE,GAAG,EAAE,GAAGvB,IAAI,CAACT,QAAQ,CAACpC,CAAC,IAAI;cAC3B4J,KAAK,EAAE,OAAO;cACdC,MAAM,EAAE;YACV,CAAE;YACFH,WAAW,EAAG3H,CAAC,IAAK;cAClB,IAAIA,CAAC,CAAC4G,MAAM,KAAK5G,CAAC,CAAC6I,aAAa,IAAI,CAAC7I,CAAC,CAAC4G,MAAM,CAACkC,OAAO,CAAC,uBAAuB,CAAC,EAAE;gBAC9ElH,mBAAmB,CAACd,IAAI,CAACL,EAAE,EAAET,CAAC,CAAC;cACjC;YACF;UAAE;YAAAoG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA,GAvCCzF,IAAI,CAACL,EAAE;UAAA2F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAwCZ,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,EAGLrJ,KAAK,CAAC2C,MAAM,KAAK,CAAC,iBACjBhD,OAAA;QAAKsJ,SAAS,EAAC,mDAAmD;QAAAK,QAAA,eAChE3J,OAAA;UAAKsJ,SAAS,EAAC,aAAa;UAAAK,QAAA,gBAC1B3J,OAAA;YAAKsJ,SAAS,EAAC,uDAAuD;YAACF,IAAI,EAAC,MAAM;YAACF,MAAM,EAAC,cAAc;YAACgB,OAAO,EAAC,WAAW;YAAAP,QAAA,eAC1H3J,OAAA;cAAMmK,aAAa,EAAC,OAAO;cAACC,cAAc,EAAC,OAAO;cAACjB,WAAW,EAAC,GAAG;cAACF,CAAC,EAAC;YAAsM;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChR,CAAC,eACN1J,OAAA;YAAGsJ,SAAS,EAAC,yCAAyC;YAAAK,QAAA,EAAC;UAAY;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eACvE1J,OAAA;YAAGsJ,SAAS,EAAC,6CAA6C;YAAAK,QAAA,EAAC;UAA0B;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtF;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,EAGArJ,KAAK,CAAC2C,MAAM,GAAG,CAAC,iBACfhD,OAAA;QAAKsJ,SAAS,EAAC,iIAAiI;QAAAK,QAAA,eAC9I3J,OAAA;UAAKsJ,SAAS,EAAC,6BAA6B;UAAAK,QAAA,gBAC1C3J,OAAA;YAAA2J,QAAA,EAAM;UAAkB;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC/B1J,OAAA;YAAA2J,QAAA,EAAM;UAAC;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACd1J,OAAA;YAAA2J,QAAA,EAAM;UAAc;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAGL7I,UAAU,iBACTb,OAAA,CAACH,eAAe;MACd0D,IAAI,EAAE1C,UAAW;MACjBqL,MAAM,EAAEvL,eAAgB;MACxBwL,OAAO,EAAEA,CAAA,KAAM;QACbvL,kBAAkB,CAAC,KAAK,CAAC;QACzBE,aAAa,CAAC,IAAI,CAAC;MACrB,CAAE;MACFsL,MAAM,EAAE5H;IAAiB;MAAA+E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1B,CACF,EAGAzH,aAAa,iBACZjC,OAAA;MAAKsJ,SAAS,EAAC,4EAA4E;MAACW,OAAO,EAAEA,CAAA,KAAM/H,gBAAgB,CAAC,KAAK,CAAE;MAAAyH,QAAA,eACjI3J,OAAA;QAAKsJ,SAAS,EAAC,sDAAsD;QAACW,OAAO,EAAG9G,CAAC,IAAKA,CAAC,CAAC6B,eAAe,CAAC,CAAE;QAAA2E,QAAA,gBACxG3J,OAAA;UAAIsJ,SAAS,EAAC,8CAA8C;UAAAK,QAAA,EAAC;QAAa;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC/E1J,OAAA;UACE4J,IAAI,EAAC,MAAM;UACXC,KAAK,EAAE9H,YAAa;UACpB+H,QAAQ,EAAG3G,CAAC,IAAKnB,eAAe,CAACmB,CAAC,CAAC4G,MAAM,CAACF,KAAK,CAAE;UACjDG,WAAW,EAAC,wBAAwB;UACpCV,SAAS,EAAC,yKAAyK;UACnL+C,SAAS;QAAA;UAAA9C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eACF1J,OAAA;UAAKsJ,SAAS,EAAC,4BAA4B;UAAAK,QAAA,gBACzC3J,OAAA;YACEiK,OAAO,EAAEA,CAAA,KAAM/H,gBAAgB,CAAC,KAAK,CAAE;YACvCoH,SAAS,EAAC,wIAAwI;YAAAK,QAAA,EACnJ;UAED;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT1J,OAAA;YACEiK,OAAO,EAAE7C,UAAW;YACpBkC,SAAS,EAAC,4FAA4F;YAAAK,QAAA,EACvG;UAED;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACtJ,EAAA,CAvkBID,cAAc;AAAAmM,EAAA,GAAdnM,cAAc;AAykBpB,eAAeA,cAAc;AAAC,IAAAmM,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}