{"ast":null,"code":"import * as React from 'react';\nimport { convertChildrenToData } from \"../utils/legacyUtil\";\nfunction buildTreeStructure(nodes, config) {\n  const {\n    id,\n    pId,\n    rootPId\n  } = config;\n  const nodeMap = new Map();\n  const rootNodes = [];\n  nodes.forEach(node => {\n    const nodeKey = node[id];\n    const clonedNode = {\n      ...node,\n      key: node.key || nodeKey\n    };\n    nodeMap.set(nodeKey, clonedNode);\n  });\n  nodeMap.forEach(node => {\n    const parentKey = node[pId];\n    const parent = nodeMap.get(parentKey);\n    if (parent) {\n      parent.children = parent.children || [];\n      parent.children.push(node);\n    } else if (parentKey === rootPId || rootPId === null) {\n      rootNodes.push(node);\n    }\n  });\n  return rootNodes;\n}\n\n/**\n * 将 `treeData` 或 `children` 转换为格式化的 `treeData`。\n * 如果 `treeData` 或 `children` 没有变化，则不会重新计算。\n */\nexport default function useTreeData(treeData, children, simpleMode) {\n  return React.useMemo(() => {\n    if (treeData) {\n      if (simpleMode) {\n        const config = {\n          id: 'id',\n          pId: 'pId',\n          rootPId: null,\n          ...(typeof simpleMode === 'object' ? simpleMode : {})\n        };\n        return buildTreeStructure(treeData, config);\n      }\n      return treeData;\n    }\n    return convertChildrenToData(children);\n  }, [children, simpleMode, treeData]);\n}","map":{"version":3,"names":["React","convertChildrenToData","buildTreeStructure","nodes","config","id","pId","rootPId","nodeMap","Map","rootNodes","forEach","node","nodeKey","clonedNode","key","set","parentKey","parent","get","children","push","useTreeData","treeData","simpleMode","useMemo"],"sources":["/Users/mnsh/Desktop/cyber-lynx/Cyber-LynX-php/frontend/node_modules/@rc-component/tree-select/es/hooks/useTreeData.js"],"sourcesContent":["import * as React from 'react';\nimport { convertChildrenToData } from \"../utils/legacyUtil\";\nfunction buildTreeStructure(nodes, config) {\n  const {\n    id,\n    pId,\n    rootPId\n  } = config;\n  const nodeMap = new Map();\n  const rootNodes = [];\n  nodes.forEach(node => {\n    const nodeKey = node[id];\n    const clonedNode = {\n      ...node,\n      key: node.key || nodeKey\n    };\n    nodeMap.set(nodeKey, clonedNode);\n  });\n  nodeMap.forEach(node => {\n    const parentKey = node[pId];\n    const parent = nodeMap.get(parentKey);\n    if (parent) {\n      parent.children = parent.children || [];\n      parent.children.push(node);\n    } else if (parentKey === rootPId || rootPId === null) {\n      rootNodes.push(node);\n    }\n  });\n  return rootNodes;\n}\n\n/**\n * 将 `treeData` 或 `children` 转换为格式化的 `treeData`。\n * 如果 `treeData` 或 `children` 没有变化，则不会重新计算。\n */\nexport default function useTreeData(treeData, children, simpleMode) {\n  return React.useMemo(() => {\n    if (treeData) {\n      if (simpleMode) {\n        const config = {\n          id: 'id',\n          pId: 'pId',\n          rootPId: null,\n          ...(typeof simpleMode === 'object' ? simpleMode : {})\n        };\n        return buildTreeStructure(treeData, config);\n      }\n      return treeData;\n    }\n    return convertChildrenToData(children);\n  }, [children, simpleMode, treeData]);\n}"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,qBAAqB,QAAQ,qBAAqB;AAC3D,SAASC,kBAAkBA,CAACC,KAAK,EAAEC,MAAM,EAAE;EACzC,MAAM;IACJC,EAAE;IACFC,GAAG;IACHC;EACF,CAAC,GAAGH,MAAM;EACV,MAAMI,OAAO,GAAG,IAAIC,GAAG,CAAC,CAAC;EACzB,MAAMC,SAAS,GAAG,EAAE;EACpBP,KAAK,CAACQ,OAAO,CAACC,IAAI,IAAI;IACpB,MAAMC,OAAO,GAAGD,IAAI,CAACP,EAAE,CAAC;IACxB,MAAMS,UAAU,GAAG;MACjB,GAAGF,IAAI;MACPG,GAAG,EAAEH,IAAI,CAACG,GAAG,IAAIF;IACnB,CAAC;IACDL,OAAO,CAACQ,GAAG,CAACH,OAAO,EAAEC,UAAU,CAAC;EAClC,CAAC,CAAC;EACFN,OAAO,CAACG,OAAO,CAACC,IAAI,IAAI;IACtB,MAAMK,SAAS,GAAGL,IAAI,CAACN,GAAG,CAAC;IAC3B,MAAMY,MAAM,GAAGV,OAAO,CAACW,GAAG,CAACF,SAAS,CAAC;IACrC,IAAIC,MAAM,EAAE;MACVA,MAAM,CAACE,QAAQ,GAAGF,MAAM,CAACE,QAAQ,IAAI,EAAE;MACvCF,MAAM,CAACE,QAAQ,CAACC,IAAI,CAACT,IAAI,CAAC;IAC5B,CAAC,MAAM,IAAIK,SAAS,KAAKV,OAAO,IAAIA,OAAO,KAAK,IAAI,EAAE;MACpDG,SAAS,CAACW,IAAI,CAACT,IAAI,CAAC;IACtB;EACF,CAAC,CAAC;EACF,OAAOF,SAAS;AAClB;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAASY,WAAWA,CAACC,QAAQ,EAAEH,QAAQ,EAAEI,UAAU,EAAE;EAClE,OAAOxB,KAAK,CAACyB,OAAO,CAAC,MAAM;IACzB,IAAIF,QAAQ,EAAE;MACZ,IAAIC,UAAU,EAAE;QACd,MAAMpB,MAAM,GAAG;UACbC,EAAE,EAAE,IAAI;UACRC,GAAG,EAAE,KAAK;UACVC,OAAO,EAAE,IAAI;UACb,IAAI,OAAOiB,UAAU,KAAK,QAAQ,GAAGA,UAAU,GAAG,CAAC,CAAC;QACtD,CAAC;QACD,OAAOtB,kBAAkB,CAACqB,QAAQ,EAAEnB,MAAM,CAAC;MAC7C;MACA,OAAOmB,QAAQ;IACjB;IACA,OAAOtB,qBAAqB,CAACmB,QAAQ,CAAC;EACxC,CAAC,EAAE,CAACA,QAAQ,EAAEI,UAAU,EAAED,QAAQ,CAAC,CAAC;AACtC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}